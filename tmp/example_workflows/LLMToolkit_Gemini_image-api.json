{"id":"a277eea5-14e2-4695-8172-2182587aaac4","revision":0,"last_node_id":128,"last_link_id":198,"nodes":[{"id":69,"type":"ResolutionSelector","pos":[3032.48974609375,-1448.499755859375],"size":[301.4302673339844,126],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"aspect_ratio","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"quality","name":"quality","type":"COMBO","widget":{"name":"quality"},"link":null}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[125,129]},{"localized_name":"height","name":"height","type":"INT","links":[126,130]}],"properties":{"cnr_id":"llm-toolkit","ver":"1.0.2","Node name for S&R":"ResolutionSelector"},"widgets_values":["I2V720p","Horizontal","HQ"]},{"id":85,"type":"LoadImage","pos":[3069.818115234375,-1258.4248046875],"size":[274.080078125,314],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[127]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"LoadImage"},"widgets_values":["fd7f544d-86fb-41b1-90f4-c8c685b8bc12.jpg","image"]},{"id":89,"type":"LoadImage","pos":[3071.18359375,-889.6766357421875],"size":[274.080078125,314],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[128]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"LoadImage"},"widgets_values":["comfydeploy_FAST_kontext_raw__00001_.png","image"]},{"id":88,"type":"ImageResizeKJv2","pos":[3379.390869140625,-892.050048828125],"size":[270,266],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":128},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":129},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":130},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[138,144]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[512,512,"nearest-exact","resize","0, 0, 0","center",2,"cpu"]},{"id":110,"type":"PreviewImage","pos":[4442.9931640625,-229.5095672607422],"size":[140,246],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":179}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":109,"type":"SaveImage","pos":[4425.67578125,-567.5352172851562],"size":[270,270],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":178},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":124,"type":"PromptManager","pos":[3914.118896484375,-965.9570922851562],"size":[400,220],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"context","name":"context","shape":7,"type":"*","link":188},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":189},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"video","name":"video","shape":7,"type":"IMAGE","link":null},{"localized_name":"text_prompt","name":"text_prompt","shape":7,"type":"STRING","widget":{"name":"text_prompt"},"link":194},{"localized_name":"audio_path","name":"audio_path","shape":7,"type":"STRING","widget":{"name":"audio_path"},"link":null},{"localized_name":"file_path","name":"file_path","shape":7,"type":"STRING","widget":{"name":"file_path"},"link":null},{"localized_name":"url","name":"url","shape":7,"type":"STRING","widget":{"name":"url"},"link":196}],"outputs":[{"localized_name":"context","name":"context","type":"*","links":[192]}],"properties":{"cnr_id":"llm-toolkit","ver":"1.0.2","Node name for S&R":"PromptManager"},"widgets_values":["","","",""]},{"id":125,"type":"ConfigGenerateImageGemini","pos":[3906.006591796875,-654.5734252929688],"size":[464.0640563964844,250],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"context","name":"context","shape":7,"type":"*","link":192},{"localized_name":"n","name":"n","shape":7,"type":"INT","widget":{"name":"n"},"link":null},{"localized_name":"aspect_ratio","name":"aspect_ratio","shape":7,"type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"person_generation","name":"person_generation","shape":7,"type":"COMBO","widget":{"name":"person_generation"},"link":null},{"localized_name":"safety_filter_level","name":"safety_filter_level","shape":7,"type":"COMBO","widget":{"name":"safety_filter_level"},"link":null},{"localized_name":"language","name":"language","shape":7,"type":"COMBO","widget":{"name":"language"},"link":null},{"localized_name":"temperature","name":"temperature","shape":7,"type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"max_tokens","name":"max_tokens","shape":7,"type":"INT","widget":{"name":"max_tokens"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"*","links":[193]}],"properties":{"cnr_id":"llm-toolkit","ver":"1.0.2","Node name for S&R":"ConfigGenerateImageGemini"},"widgets_values":[1,"1:1",199066144281446,"randomize","allow_adult","block_low_and_above","auto",0.7,8192]},{"id":74,"type":"ImageBatch","pos":[3699.639892578125,-1034.2860107421875],"size":[140,46],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","link":143},{"localized_name":"image2","name":"image2","type":"IMAGE","link":144}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[189]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"ImageBatch"},"widgets_values":[]},{"id":120,"type":"GenerateImage","pos":[3922.901123046875,-331.3470458984375],"size":[400,340],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"context","name":"context","shape":7,"type":"*","link":193},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"*","links":null},{"localized_name":"image","name":"image","type":"IMAGE","links":[178,179]}],"properties":{"cnr_id":"llm-toolkit","ver":"1.0.2","Node name for S&R":"GenerateImage"},"widgets_values":["\nA children's book drawing of a veterinarian using a stethoscope to \nlisten to the heartbeat of a baby otter.\n","edit"]},{"id":122,"type":"GeminiProviderNode","pos":[3944.988525390625,-1124.8521728515625],"size":[335.6441345214844,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"context","name":"context","shape":7,"type":"*","link":null},{"localized_name":"llm_model","name":"llm_model","type":"COMBO","widget":{"name":"llm_model"},"link":null},{"localized_name":"external_api_key","name":"external_api_key","shape":7,"type":"STRING","widget":{"name":"external_api_key"},"link":null}],"outputs":[{"localized_name":"context","name":"context","type":"*","links":[188]}],"properties":{"cnr_id":"llm-toolkit","ver":"1.0.2","Node name for S&R":"GeminiProviderNode"},"widgets_values":["imagen-3.0-generate-002",""]},{"id":94,"type":"ComfyUIDeployExternalText","pos":[3234.7607421875,-416.4054260253906],"size":[395.5683898925781,190],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"input_id","name":"input_id","type":"STRING","widget":{"name":"input_id"},"link":null},{"localized_name":"default_value","name":"default_value","shape":7,"type":"STRING","widget":{"name":"default_value"},"link":null},{"localized_name":"display_name","name":"display_name","shape":7,"type":"STRING","widget":{"name":"display_name"},"link":null},{"localized_name":"description","name":"description","shape":7,"type":"STRING","widget":{"name":"description"},"link":null}],"outputs":[{"localized_name":"text","name":"text","type":"STRING","links":[194,196]}],"title":"PROMPT","properties":{"cnr_id":"comfyui-deploy","ver":"b889f79baf9e099d5e54bd20bab4aa1e7c3296c0","Node name for S&R":"ComfyUIDeployExternalText","widget_ue_connectable":{}},"widgets_values":["ACTION_MANUAL_PROMPT","the girl is holding the staff on her right hand while carrying the book under her arm","MANUA_PROMPT ","IF there is no OPENAI_API_KEY on the machine secrets. You will need to enter your full prompt and delete the AI_SYSTEM_PROMPT  \n\nOtherwise you can use this to add a The Task to be preform by the model for example \"replace the cat from image1 with the dog on image2\" \n\nshe is wearing the same clothes but it has the logo on the swimsuit make sure it looks well integrated and part of the same material with the fabric and not just an overlay the logo should wrap with the swinsuit to the body of the model "],"color":"#232","bgcolor":"#353"},{"id":87,"type":"ImageResizeKJv2","pos":[3378.025390625,-1260.79833984375],"size":[270,266],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":127},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":125},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":126},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[137,143]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[512,512,"nearest-exact","resize","0, 0, 0","center",2,"cpu"]},{"id":101,"type":"ImageStitch","pos":[3450.1796875,59.28425598144531],"size":[270,150],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image1","name":"image1","type":"IMAGE","link":137},{"localized_name":"image2","name":"image2","shape":7,"type":"IMAGE","link":138},{"localized_name":"direction","name":"direction","type":"COMBO","widget":{"name":"direction"},"link":null},{"localized_name":"match_image_size","name":"match_image_size","type":"BOOLEAN","widget":{"name":"match_image_size"},"link":null},{"localized_name":"spacing_width","name":"spacing_width","type":"INT","widget":{"name":"spacing_width"},"link":null},{"localized_name":"spacing_color","name":"spacing_color","type":"COMBO","widget":{"name":"spacing_color"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.43","Node name for S&R":"ImageStitch"},"widgets_values":["right",true,0,"white"]},{"id":126,"type":"Note","pos":[4459.59423828125,-997.706298828125],"size":[502.26068115234375,300.1862487792969],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The 200 OK response simply doesn’t contain any image payload, so our code reports “No images generated”.\nWhy does that happen?\nModel availability / billing\nImagen 4 Preview and Imagen 3/4 generally require a Paid-tier account.\nIf the project is still on the free tier the request is accepted (HTTP 200) but returns no generated_images.\nRegion restrictions\nGoogle blocks Imagen output for certain countries (many in EMEA). The request again returns 200 OK with an empty result.\nPolicy filters\nIf the prompt, seed, person-generation option, or safety level violate policy the model can respond with text only. With the preview models that often appears as an empty images list.\nWhat you can try\nVerify billing\nOpen the Google Cloud console → Generative AI → Quota & Billing. Make sure the project has a paid plan enabled.\nCheck region / VPN\nQuick test: run the same code from a US-based VPN or GCP Cloud Shell. If it starts producing images, the original IP’s region is blocked."],"color":"#432","bgcolor":"#653"},{"id":127,"type":"Note","pos":[4460.60205078125,-1316.876953125],"size":[353.3461608886719,108.53372192382812],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Experimental not guaranteed to work since I am in EU / UK can't even test this properly \nseems like imagen3 works for generation but the advanced techniques for image editing I had on my old IF_LLM Gemini node were only available on \ngemini-2.0-flash-preview-image-generation \nand is not available in europe anymore\nso far it generates on imagen3 but it can't see pictures "],"color":"#432","bgcolor":"#653"},{"id":79,"type":"Note","pos":[4457.80859375,-1152.0203857421875],"size":[353.3461608886719,108.53372192382812],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Preview: gemini-2.0-flash-preview-image-generation\ngemini-2.0-flash-preview-image-generation is not currently supported in a number of countries in Europe, Middle East & Africa\n\nIf you can't see the model that is the reason\n"],"color":"#432","bgcolor":"#653"},{"id":128,"type":"Note","pos":[4016.304931640625,-1307.341552734375],"size":[392.84893798828125,103.2160415649414],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Optional set the machine secrets if you are using Comfy-Deploy\n\nGEMINI_API_KEY=<YOUR_API_KEY>\nSet the system environment variable or the .env file inside the root of llm-toolki custom node folder ore set the external api key \n\n"],"color":"#432","bgcolor":"#653"}],"links":[[125,69,0,87,1,"INT"],[126,69,1,87,2,"INT"],[127,85,0,87,0,"IMAGE"],[128,89,0,88,0,"IMAGE"],[129,69,0,88,1,"INT"],[130,69,1,88,2,"INT"],[137,87,0,101,0,"IMAGE"],[138,88,0,101,1,"IMAGE"],[143,87,0,74,0,"IMAGE"],[144,88,0,74,1,"IMAGE"],[178,120,1,109,0,"IMAGE"],[179,120,1,110,0,"IMAGE"],[188,122,0,124,0,"*"],[189,74,0,124,1,"IMAGE"],[192,124,0,125,0,"*"],[193,125,0,120,0,"*"],[194,94,0,124,4,"STRING"],[196,94,0,124,7,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.7430526079249403,"offset":[-3643.4060313283994,1529.9909541129653]}},"version":0.4}