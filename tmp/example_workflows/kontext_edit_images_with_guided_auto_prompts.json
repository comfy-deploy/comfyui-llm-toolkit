{"id":"7c32e4ad-4542-4e3c-b9e8-aaa30fdc38a5","extra":{"ds":{"scale":0.7627768444387453,"offset":[7612.236140315523,-4666.255601955403]},"ue_links":[],"groupNodes":{"Edit":{"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"nodes":[{"id":-1,"pos":[2354.87890625,-127.23468780517578],"mode":0,"size":[75,26],"type":"Reroute","flags":{},"index":0,"order":20,"inputs":[{"link":null,"name":"","type":"*"}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"horizontal":false,"showOutputText":false}},{"id":-1,"pos":[2730,-220],"mode":0,"size":[197.712890625,46],"type":"ReferenceLatent","flags":{},"index":1,"order":22,"inputs":[{"link":null,"name":"conditioning","type":"CONDITIONING","localized_name":"conditioning"},{"link":null,"name":"latent","type":"LATENT","shape":7,"localized_name":"latent"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"ReferenceLatent"},"widgets_values":[]},{"id":-1,"pos":[3270,-110],"mode":0,"size":[210,46],"type":"VAEDecode","flags":{},"index":2,"order":25,"inputs":[{"link":null,"name":"samples","type":"LATENT","localized_name":"samples"},{"link":null,"name":"vae","type":"VAE","localized_name":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"localized_name":"IMAGE"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":-1,"pos":[2930,-110],"mode":0,"size":[315,262],"type":"KSampler","flags":{},"index":3,"order":24,"inputs":[{"link":null,"name":"model","type":"MODEL","localized_name":"model"},{"link":null,"name":"positive","type":"CONDITIONING","localized_name":"positive"},{"link":null,"name":"negative","type":"CONDITIONING","localized_name":"negative"},{"link":null,"name":"latent_image","type":"LATENT","localized_name":"latent_image"},{"link":null,"name":"seed","type":"INT","widget":{"name":"seed"},"localized_name":"seed"},{"link":null,"name":"steps","type":"INT","widget":{"name":"steps"},"localized_name":"steps"},{"link":null,"name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"localized_name":"cfg"},{"link":null,"name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"localized_name":"sampler_name"},{"link":null,"name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"localized_name":"scheduler"},{"link":null,"name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"localized_name":"denoise"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[],"slot_index":0,"localized_name":"LATENT"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"KSampler"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1]},{"id":-1,"pos":[2940,-220],"mode":0,"size":[211.60000610351562,58],"type":"FluxGuidance","flags":{},"index":4,"order":23,"inputs":[{"link":null,"name":"conditioning","type":"CONDITIONING","localized_name":"conditioning"},{"link":null,"name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"localized_name":"guidance"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"slot_index":0,"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"FluxGuidance"},"widgets_values":[2.5]},{"id":-1,"pos":[3490,-110],"mode":0,"size":[985.3012084960938,1060.3828125],"type":"SaveImage","flags":{},"index":5,"order":26,"inputs":[{"link":null,"name":"images","type":"IMAGE","localized_name":"images"},{"link":null,"name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"localized_name":"filename_prefix"}],"outputs":[],"properties":{"ver":"0.3.38","cnr_id":"comfy-core"},"widgets_values":["ComfyUI"]},{"id":-1,"pos":[2500,-110],"mode":0,"size":[422.84503173828125,164.31304931640625],"type":"CLIPTextEncode","color":"#232","flags":{},"index":6,"order":12,"title":"CLIP Text Encode (Positive Prompt)","inputs":[{"link":null,"name":"clip","type":"CLIP","localized_name":"clip"},{"link":null,"name":"text","type":"STRING","widget":{"name":"text"},"localized_name":"text"}],"bgcolor":"#353","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"slot_index":0,"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"CLIPTextEncode"},"widgets_values":["there is a bright light"]},{"id":-1,"pos":[2504.1435546875,97.9598617553711],"mode":0,"size":[422.84503173828125,164.31304931640625],"type":"CLIPTextEncode","color":"#322","flags":{"collapsed":true},"index":7,"order":13,"title":"CLIP Text Encode (Negative Prompt)","inputs":[{"link":null,"name":"clip","type":"CLIP","localized_name":"clip"},{"link":null,"name":"text","type":"STRING","widget":{"name":"text"},"localized_name":"text"}],"bgcolor":"#533","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"slot_index":0,"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":-1,"pos":[2630,-370],"mode":0,"size":[270,82],"type":"UNETLoader","color":"#223","flags":{},"index":8,"order":6,"inputs":[{"link":null,"name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"localized_name":"unet_name"},{"link":null,"name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"localized_name":"weight_dtype"}],"bgcolor":"#335","outputs":[{"name":"MODEL","type":"MODEL","links":[],"localized_name":"MODEL"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"UNETLoader"},"widgets_values":["preliminary-dev-kontext.sft","default"]},{"id":-1,"pos":[2100,-290],"mode":0,"size":[337.76861572265625,130],"type":"DualCLIPLoader","color":"#223","flags":{},"index":9,"order":8,"inputs":[{"link":null,"name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"localized_name":"clip_name1"},{"link":null,"name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"localized_name":"clip_name2"},{"link":null,"name":"type","type":"COMBO","widget":{"name":"type"},"localized_name":"type"},{"link":null,"name":"device","type":"COMBO","shape":7,"widget":{"name":"device"},"localized_name":"device"}],"bgcolor":"#335","outputs":[{"name":"CLIP","type":"CLIP","links":[],"localized_name":"CLIP"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"]},{"id":-1,"pos":[2960,-370],"mode":0,"size":[270,58],"type":"VAELoader","color":"#223","flags":{},"index":10,"order":7,"inputs":[{"link":null,"name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"localized_name":"vae_name"}],"bgcolor":"#335","outputs":[{"name":"VAE","type":"VAE","links":[],"localized_name":"VAE"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]}],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"input":{"cfg":{"visible":false},"denoise":{"visible":false}},"output":{"0":{"visible":true}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{},"9":{"input":{"type":{"visible":false}}},"10":{}},"external":[]},"FLUX.1 Kontext Image Edit":{"links":[[6,0,1,0,72,"CONDITIONING"],[0,0,1,1,66,"*"],[3,0,2,0,69,"LATENT"],[10,0,2,1,76,"VAE"],[8,0,3,0,74,"MODEL"],[4,0,3,1,70,"CONDITIONING"],[7,0,3,2,73,"CONDITIONING"],[0,0,3,3,66,"*"],[1,0,4,0,67,"CONDITIONING"],[2,0,5,0,68,"IMAGE"],[9,0,6,0,75,"CLIP"],[9,0,7,0,75,"CLIP"]],"nodes":[{"id":-1,"pos":[2354.87890625,-127.23468780517578],"mode":0,"size":[75,26],"type":"Reroute","flags":{},"index":0,"order":20,"inputs":[{"link":null,"name":"","type":"*"}],"outputs":[{"name":"","type":"*","links":null}],"properties":{"horizontal":false,"showOutputText":false}},{"id":-1,"pos":[2730,-220],"mode":0,"size":[197.712890625,46],"type":"ReferenceLatent","flags":{},"index":1,"order":22,"inputs":[{"link":null,"name":"conditioning","type":"CONDITIONING","localized_name":"conditioning"},{"link":null,"name":"latent","type":"LATENT","shape":7,"localized_name":"latent"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"ReferenceLatent"},"widgets_values":[]},{"id":-1,"pos":[3270,-110],"mode":0,"size":[210,46],"type":"VAEDecode","flags":{},"index":2,"order":25,"inputs":[{"link":null,"name":"samples","type":"LATENT","localized_name":"samples"},{"link":null,"name":"vae","type":"VAE","localized_name":"vae"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"slot_index":0,"localized_name":"IMAGE"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":-1,"pos":[2930,-110],"mode":0,"size":[315,262],"type":"KSampler","flags":{},"index":3,"order":24,"inputs":[{"link":null,"name":"model","type":"MODEL","localized_name":"model"},{"link":null,"name":"positive","type":"CONDITIONING","localized_name":"positive"},{"link":null,"name":"negative","type":"CONDITIONING","localized_name":"negative"},{"link":null,"name":"latent_image","type":"LATENT","localized_name":"latent_image"},{"link":null,"name":"seed","type":"INT","widget":{"name":"seed"},"localized_name":"seed"},{"link":null,"name":"steps","type":"INT","widget":{"name":"steps"},"localized_name":"steps"},{"link":null,"name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"localized_name":"cfg"},{"link":null,"name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"localized_name":"sampler_name"},{"link":null,"name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"localized_name":"scheduler"},{"link":null,"name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"localized_name":"denoise"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[],"slot_index":0,"localized_name":"LATENT"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"KSampler"},"widgets_values":[972054013131369,"fixed",20,1,"euler","simple",1]},{"id":-1,"pos":[2940,-220],"mode":0,"size":[211.60000610351562,58],"type":"FluxGuidance","flags":{},"index":4,"order":23,"inputs":[{"link":null,"name":"conditioning","type":"CONDITIONING","localized_name":"conditioning"},{"link":null,"name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"localized_name":"guidance"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"slot_index":0,"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"FluxGuidance"},"widgets_values":[2.5]},{"id":-1,"pos":[3490,-110],"mode":0,"size":[985.3012084960938,1060.3828125],"type":"SaveImage","flags":{},"index":5,"order":26,"inputs":[{"link":null,"name":"images","type":"IMAGE","localized_name":"images"},{"link":null,"name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"localized_name":"filename_prefix"}],"outputs":[],"properties":{"ver":"0.3.38","cnr_id":"comfy-core"},"widgets_values":["ComfyUI"]},{"id":-1,"pos":[2500,-110],"mode":0,"size":[422.84503173828125,164.31304931640625],"type":"CLIPTextEncode","color":"#232","flags":{},"index":6,"order":12,"title":"CLIP Text Encode (Positive Prompt)","inputs":[{"link":null,"name":"clip","type":"CLIP","localized_name":"clip"},{"link":null,"name":"text","type":"STRING","widget":{"name":"text"},"localized_name":"text"}],"bgcolor":"#353","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"slot_index":0,"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"CLIPTextEncode"},"widgets_values":["there is a bright light"]},{"id":-1,"pos":[2504.1435546875,97.9598617553711],"mode":0,"size":[422.84503173828125,164.31304931640625],"type":"CLIPTextEncode","color":"#322","flags":{"collapsed":true},"index":7,"order":13,"title":"CLIP Text Encode (Negative Prompt)","inputs":[{"link":null,"name":"clip","type":"CLIP","localized_name":"clip"},{"link":null,"name":"text","type":"STRING","widget":{"name":"text"},"localized_name":"text"}],"bgcolor":"#533","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[],"slot_index":0,"localized_name":"CONDITIONING"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":-1,"pos":[2630,-370],"mode":0,"size":[270,82],"type":"UNETLoader","color":"#223","flags":{},"index":8,"order":6,"inputs":[{"link":null,"name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"localized_name":"unet_name"},{"link":null,"name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"localized_name":"weight_dtype"}],"bgcolor":"#335","outputs":[{"name":"MODEL","type":"MODEL","links":[],"localized_name":"MODEL"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"UNETLoader"},"widgets_values":["preliminary-dev-kontext.sft","default"]},{"id":-1,"pos":[2100,-290],"mode":0,"size":[337.76861572265625,130],"type":"DualCLIPLoader","color":"#223","flags":{},"index":9,"order":8,"inputs":[{"link":null,"name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"localized_name":"clip_name1"},{"link":null,"name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"localized_name":"clip_name2"},{"link":null,"name":"type","type":"COMBO","widget":{"name":"type"},"localized_name":"type"},{"link":null,"name":"device","type":"COMBO","shape":7,"widget":{"name":"device"},"localized_name":"device"}],"bgcolor":"#335","outputs":[{"name":"CLIP","type":"CLIP","links":[],"localized_name":"CLIP"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"DualCLIPLoader"},"widgets_values":["clip_l.safetensors","t5xxl_fp16.safetensors","flux","default"]},{"id":-1,"pos":[2960,-370],"mode":0,"size":[270,58],"type":"VAELoader","color":"#223","flags":{},"index":10,"order":7,"inputs":[{"link":null,"name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"localized_name":"vae_name"}],"bgcolor":"#335","outputs":[{"name":"VAE","type":"VAE","links":[],"localized_name":"VAE"}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"VAELoader"},"widgets_values":["ae.safetensors"]}],"config":{"0":{},"1":{},"2":{"output":{"0":{"visible":true}}},"3":{"input":{"cfg":{"visible":false},"denoise":{"visible":false}},"output":{"0":{"visible":true}}},"4":{},"5":{},"6":{},"7":{"input":{"text":{"visible":false}}},"8":{},"9":{"input":{"type":{"visible":false}}},"10":{}},"external":[]}},"node_versions":{"comfy-core":"0.3.26","ComfyUI-WanVideoWrapper":"5a2383621a05825d0d0437781afcb8552d9590fd","ComfyUI-VideoHelperSuite":"0a75c7958fe320efcb052f1d9f8451fd20c730a8"},"frontendVersion":"1.23.4","VHS_MetadataImage":true,"VHS_latentpreview":false,"VHS_KeepIntermediate":true,"VHS_latentpreviewrate":0},"links":[[3034,1059,0,575,0,"*"],[5519,2206,0,2207,0,"IMAGE"],[5520,2209,0,2207,1,"COLOR"],[5523,2211,0,2212,0,"IMAGE"],[5524,2214,0,2212,1,"COLOR"],[5525,2212,0,2215,0,"*"],[5555,2207,0,2242,0,"*"],[5561,581,0,2206,1,"INT"],[5562,582,0,2206,2,"INT"],[5600,2245,0,2100,0,"*"],[5666,2213,0,2254,0,"IMAGE"],[5667,2254,0,2211,0,"IMAGE"],[5668,2208,0,2255,0,"IMAGE"],[5669,2255,0,2206,0,"IMAGE"],[5766,581,0,2280,0,"*"],[5767,582,0,2281,0,"*"],[5931,2264,0,2245,0,"STRING"],[5932,533,0,2245,1,"STRING"],[5934,2245,0,2204,4,"STRING"],[5935,2203,4,2099,0,"STRING"],[5936,2203,4,996,0,"*"],[5958,2352,0,2360,0,"CLIP"],[5960,2352,0,2361,0,"CLIP"],[5974,2367,0,2369,0,"IMAGE"],[5975,2348,0,2369,1,"VAE"],[5999,996,0,2360,1,"STRING"],[6008,2211,0,2086,0,"IMAGE"],[6009,2206,0,2086,1,"IMAGE"],[6017,2086,0,2204,1,"IMAGE"],[6019,2381,0,581,0,"*"],[6020,2381,1,582,0,"*"],[6021,581,0,2357,0,"INT"],[6022,582,0,2357,1,"INT"],[6023,581,0,2346,1,"INT"],[6024,582,0,2346,2,"INT"],[6029,2367,0,2383,0,"IMAGE"],[6038,2369,0,2385,1,"LATENT"],[6065,2361,0,2402,0,"CONDITIONING"],[6082,2356,0,2346,0,"MODEL"],[6084,2211,0,2408,1,"IMAGE"],[6112,2348,0,2421,1,"VAE"],[6114,2367,0,2423,0,"IMAGE"],[6117,2423,2,2422,2,"INT"],[6122,581,0,2211,1,"INT"],[6123,582,0,2211,2,"INT"],[6127,581,0,2422,1,"INT"],[6129,2360,0,2385,0,"CONDITIONING"],[6130,2385,0,2404,0,"CONDITIONING"],[6140,2211,0,2426,0,"*"],[6141,2426,0,2422,0,"IMAGE"],[6142,2422,0,2420,0,"IMAGE"],[6143,2422,0,2421,0,"IMAGE"],[6158,2211,0,2430,0,"IMAGE"],[6159,2206,0,2430,1,"IMAGE"],[6160,2430,0,2200,0,"IMAGE"],[6161,2430,0,2367,0,"IMAGE"],[6162,2404,0,2446,1,"CONDITIONING"],[6163,2402,0,2446,2,"CONDITIONING"],[6164,2361,0,2446,3,"CONDITIONING"],[6165,575,0,2446,5,"INT"],[6166,2421,0,2446,4,"LATENT"],[6168,2346,0,2446,0,"MODEL"],[6169,2446,0,2449,0,"LATENT"],[6170,2348,0,2449,1,"VAE"],[6171,2449,0,2359,0,"IMAGE"],[6172,2450,0,2381,0,"COMBO"],[6173,2204,0,2451,0,"*"],[6174,2451,0,2203,0,"*"],[6178,2455,0,2453,1,"STRING"],[6185,2386,0,2463,0,"*"],[6186,2463,0,2361,1,"STRING"],[6190,2465,0,2446,6,"INT"],[6191,2453,0,2204,0,"*"]],"nodes":[{"id":1059,"pos":[-8063.31787109375,4994.7568359375],"mode":0,"size":[400,208],"type":"ComfyUIDeployExternalSeed","color":"#223","flags":{},"order":0,"inputs":[],"bgcolor":"#335","outputs":[{"name":"seed","type":"INT","links":[3034]}],"properties":{"ver":"ceb53bcb228176b854c7d72140a0dbedaa212eea","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalSeed","widget_ue_connectable":{}},"widgets_values":["input_seed",-1,1,4294967295,"","For default value:\n\"-1\" (i.e. not in range): Randomize within the min and max value range. \nin range: Fixed, always the same value\n"]},{"id":2100,"pos":[-7396.47998046875,4312.44921875],"mode":0,"size":[314.9275817871094,220.27334594726562],"type":"Display Any (rgthree)","color":"#223","flags":{},"order":36,"inputs":[{"dir":3,"link":5600,"name":"source","type":"*"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"84a146fee39f7b3a8c6631dcac29bc13b077eb49","cnr_id":"rgthree-comfy","Node name for S&R":"Display Any (rgthree)"},"widgets_values":[""]},{"id":2099,"pos":[-7384.46240234375,4578.2109375],"mode":0,"size":[270,106],"type":"ComfyDeployOutputText","color":"#223","flags":{},"order":61,"inputs":[{"link":5935,"name":"text","type":"STRING"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyDeployOutputText"},"widgets_values":["ComfyUI","txt","output_text"]},{"id":2209,"pos":[-6361.83251953125,5494.794921875],"mode":0,"size":[320,82],"type":"AILab_ColorInput","color":"#223","flags":{"collapsed":true},"order":1,"inputs":[],"bgcolor":"#335","outputs":[{"name":"COLOR","type":"COLOR","links":[5520]}],"properties":{"ver":"8577848f31ed7dcf19b920451e7e90fad17cbc3b","cnr_id":"comfyui-rmbg","Node name for S&R":"AILab_ColorInput"},"widgets_values":["white",""]},{"id":2212,"pos":[-6359.18212890625,5238.337890625],"mode":0,"size":[320,254],"type":"BiRefNetRMBG","color":"#223","flags":{"collapsed":false},"order":45,"inputs":[{"link":5523,"name":"image","type":"IMAGE"},{"link":5524,"name":"background_color","type":"COLOR","shape":7,"widget":{"name":"background_color"}}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5525]},{"name":"MASK","type":"MASK","links":null},{"name":"MASK_IMAGE","type":"IMAGE","links":[]}],"properties":{"ver":"daf0b01deb1c529dfb543093bba2ed586aad7886","cnr_id":"comfyui-rmbg","Node name for S&R":"BiRefNetRMBG","widget_ue_connectable":{}},"widgets_values":["BiRefNet-general",1,0,false,false,"Color","#222222"]},{"id":2214,"pos":[-6222.79248046875,5183.0107421875],"mode":0,"size":[320,82],"type":"AILab_ColorInput","color":"#223","flags":{"collapsed":true},"order":2,"inputs":[],"bgcolor":"#335","outputs":[{"name":"COLOR","type":"COLOR","links":[5524]}],"properties":{"ver":"8577848f31ed7dcf19b920451e7e90fad17cbc3b","cnr_id":"comfyui-rmbg","Node name for S&R":"AILab_ColorInput"},"widgets_values":["white",""]},{"id":2207,"pos":[-6362.03466796875,5655.318359375],"mode":0,"size":[320,254],"type":"BiRefNetRMBG","color":"#223","flags":{"collapsed":false},"order":44,"inputs":[{"link":5519,"name":"image","type":"IMAGE"},{"link":5520,"name":"background_color","type":"COLOR","shape":7,"widget":{"name":"background_color"}}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5555]},{"name":"MASK","type":"MASK","links":null},{"name":"MASK_IMAGE","type":"IMAGE","links":[]}],"properties":{"ver":"daf0b01deb1c529dfb543093bba2ed586aad7886","cnr_id":"comfyui-rmbg","Node name for S&R":"BiRefNetRMBG","widget_ue_connectable":{}},"widgets_values":["BiRefNet-general",1,0,false,false,"Color","#222222"]},{"id":1855,"pos":[-8618.849609375,4254.7373046875],"mode":0,"size":[770.458984375,50],"type":"Label (rgthree)","color":"#223","flags":{"allow_interaction":true},"order":3,"title":"www.youtube.com/@impactframes","inputs":[],"bgcolor":"#335","outputs":[],"properties":{"padding":0,"fontSize":50,"fontColor":"#999999","textAlign":"left","fontFamily":"Arial","borderRadius":0,"backgroundColor":"\n\n\n\n\n\n\n\n#e6ccff"}},{"id":2280,"pos":[-6674.06494140625,4858.7607421875],"mode":0,"size":[210,88],"type":"Display Any (rgthree)","color":"#223","flags":{},"order":37,"inputs":[{"dir":3,"link":5766,"name":"source","type":"*"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"84a146fee39f7b3a8c6631dcac29bc13b077eb49","cnr_id":"rgthree-comfy","Node name for S&R":"Display Any (rgthree)"},"widgets_values":[""]},{"id":2281,"pos":[-6677.63037109375,4997.455078125],"mode":0,"size":[210,88],"type":"Display Any (rgthree)","color":"#223","flags":{},"order":39,"inputs":[{"dir":3,"link":5767,"name":"source","type":"*"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"84a146fee39f7b3a8c6631dcac29bc13b077eb49","cnr_id":"rgthree-comfy","Node name for S&R":"Display Any (rgthree)"},"widgets_values":[""]},{"id":2086,"pos":[-7034.98291015625,4912.68603515625],"mode":0,"size":[270,142],"type":"ImageBatchMulti","color":"#223","flags":{"collapsed":false},"order":46,"inputs":[{"link":6008,"name":"image_1","type":"IMAGE"},{"link":6009,"name":"image_2","type":"IMAGE"}],"bgcolor":"#335","outputs":[{"name":"images","type":"IMAGE","links":[6017]}],"properties":{"ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","cnr_id":"comfyui-kjnodes"},"widgets_values":[2,null]},{"id":2242,"pos":[-6346.27978515625,5578.3984375],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":50,"inputs":[{"link":5555,"name":"","type":"*"}],"bgcolor":"#335","outputs":[{"name":"","type":"IMAGE","links":[]}],"properties":{"horizontal":false,"showOutputText":false}},{"id":2203,"pos":[-7557.98046875,5459.8857421875],"mode":0,"size":[418.9125061035156,263.6280517578125],"type":"Display_Text","color":"#223","flags":{"collapsed":false},"order":59,"inputs":[{"link":6174,"name":"context","type":"*"}],"bgcolor":"#335","outputs":[{"name":"context","type":"*","links":[]},{"name":"text_list","type":"STRING","links":null,"shape":6},{"name":"count","type":"INT","links":null},{"name":"selected","type":"STRING","links":[]},{"name":"text_full","type":"STRING","links":[5935,5936]}],"properties":{"ver":"3d82dbfe091d84868212e5f275deb5447fa4e659","cnr_id":"llm-toolkit","Node name for S&R":"Display_Text","widget_ue_connectable":{}},"widgets_values":["0","Create the character from Image 2 in a realistic style, using the muscular physique, detailed skin texture, and lifelike lighting from Image 1. Preserve the character's iconic green tunic, hat, brown boots, and leather belts with realistic fabric and leather textures. Maintain the original pose and sword-and-shield stance while converting facial features and hair to a natural human appearance, blending fantasy elements with the realism evident in Image 1."]},{"id":2215,"pos":[-6335.78857421875,5163.7041015625],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":51,"inputs":[{"link":5525,"name":"","type":"*"}],"bgcolor":"#335","outputs":[{"name":"","type":"IMAGE","links":[]}],"properties":{"horizontal":false,"showOutputText":false}},{"id":2264,"pos":[-9329.36328125,4876.41748046875],"mode":0,"size":[360.76214599609375,775.0985107421875],"type":"ComfyUIDeployExternalText","color":"#223","flags":{},"order":4,"inputs":[],"bgcolor":"#335","outputs":[{"name":"text","type":"STRING","links":[5931]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalText"},"widgets_values":["AI_SYSTEM_PROMPT","You are Kontext, a master artist who converts editing requests into a single, flowing paragraph of exactly 70 words. Every user request arrives with two images:\n\nImage 1 – Subject. This is the frame that must be edited.\n\nImage 2 – Reference. Provide background, style, texture, palette, or any other visual attribute the task demands.\n\nTask-Resolution Logic\n• change/replace background → substitute Image 1’s backdrop; keep Image 1’s subject unchanged; set new backdrop from Image 2\n• restyle / apply style / transfer style → style-transfer onto Image 1; extract colours, brushwork, medium, lighting cues from Image 2\n• simple/object modification → edit only the named object in Image 1; ignore Image 2 unless explicitly referenced\n• text editing → replace characters or words in Image 1; copy fonts and formatting from Image 1; Image 2 unused unless asked\n\nIf multiple actions are needed, narrate them step-by-step within the 70-word limit.\n\nWriting Rules\n\nBe specific and clear – name objects, colours, styles precisely.\n\nExplicit preservation – state what remains unchanged (pose, facial features, composition).\n\nSequential editing – describe edits in logical order (background, then attire, then lighting).\n\nApproved verbs – change, replace, convert, adjust; avoid vague verbs like transform unless paired with detail.\n\nCharacter consistency – use clear identifiers (“the woman with short black hair”) and preserve features.\n\nQuotes for text edits – put new and old text in quotes; keep font and layout intact.\n\nBest-Practice Templates\nBackground replacement: “Change the background to [new setting] from Image 2, keep the subject in the exact same position and pose.”\nStyle transfer: “Convert Image 1 to [specific style from Image 2] while maintaining composition, proportions, and lighting.”\nObject modification: “Change [object] in Image 1 to [new state], keep all else unchanged.”\nText editing: “Replace ‘[original]’ with ‘[new]’, preserve original font and placement.”\n\nRemember: Produce exactly 70 words describing the final image edits. If the user’s request is ambiguous, ask a clarifying question once before proceeding.\n","","FOR OTHER GENERAL TASKS COPY THIS plus write the task at the end after **TASK:**\n\n\nYou are a master artist crafting precise visual narratives for text-to-image generation. When given an image or visual description, create a flowing 70 word paragraph following this base on the TASK\n\n### 1. Basic Modifications\n- Simple and direct: \"Change the car color to red\"\n- Maintain style: \"Change to daytime while maintaining the same style of the painting\"\n\n### 2. Style Transfer\n**Principles:**\n- Clearly name style: \"Transform to Bauhaus art style\"\n- Describe characteristics: \"Transform to oil painting with visible brushstrokes, thick paint texture\"\n- Preserve composition: \"Change to Bauhaus style while maintaining the original composition\"\n\n### 3. Character Consistency\n**Framework:**\n- Specific description: \"The woman with short black hair\" instead of \"she\"\n- Preserve features: \"while maintaining the same facial features, hairstyle, and expression\"\n- Step-by-step modifications: Change background first, then actions\n\n### 4. Text Editing\n- Use quotes: \"Replace 'joy' with 'BFL'\"\n- Maintain format: \"Replace text while maintaining the same font style\"\n\n## Common Problem Solutions\n\n### Character Changes Too Much\n❌ Wrong: \"Transform the person into a Viking\"\n✅ Correct: \"Change the clothes to be a viking warrior while preserving facial features\"\n\n### Composition Position Changes\n❌ Wrong: \"Put him on a beach\"\n✅ Correct: \"Change the background to a beach while keeping the person in the exact same position, scale, and pose\"\n\n### Style Application Inaccuracy\n❌ Wrong: \"Make it a sketch\"\n✅ Correct: \"Convert to pencil sketch with natural graphite lines, cross-hatching, and visible paper texture\"\n\n## Core Principles\n\n1. **Be Specific and Clear** - Use precise descriptions, avoid vague terms\n2. **Step-by-step Editing** - Break complex modifications into multiple simple steps\n3. **Explicit Preservation** - State what should remain unchanged\n4. **Verb Selection** - Use \"change\", \"replace\" rather than \"transform\"\n\n## Best Practice Templates\n\n**Object Modification:**\n\"Change [object] to [new state], keep [content to preserve] unchanged\"\n\n**Style Transfer:**\n\"Transform to [specific style], while maintaining [composition/character/other] unchanged\"\n\n**Background Replacement:**\n\"Change the background to [new background], keep the subject in the exact same position and pose\"\n\n**Text Editing:**\n\"Replace '[original text]' with '[new text]', maintain the same font style\"\n\n> **Remember:** The more specific, the better. Kontext excels at understanding detailed instructions and maintaining consistency. \n\n**TASK:**"]},{"id":2348,"pos":[-5937.1513671875,5523.2421875],"mode":0,"size":[311.81634521484375,60.429901123046875],"type":"VAELoader","color":"#223","flags":{},"order":5,"inputs":[],"bgcolor":"#335","outputs":[{"name":"VAE","type":"VAE","links":[5975,6112,6170],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"VAELoader"},"widgets_values":["ae.sft"]},{"id":1854,"pos":[-9230.494140625,4335.080078125],"mode":4,"size":[1764.7265625,120],"type":"Label (rgthree)","color":"#223","flags":{"allow_interaction":true},"order":6,"title":"RUN it in COMFYDEPLOY.COM ","inputs":[],"bgcolor":"#335","outputs":[],"properties":{"padding":0,"fontSize":120,"fontColor":"#999999","textAlign":"left","fontFamily":"Arial","borderRadius":0,"backgroundColor":"\n\n\n\n\n\n\n\n#e6ccff"}},{"id":2381,"pos":[-7038.818359375,4654.31884765625],"mode":0,"size":[282.8775329589844,126],"type":"VideoResolutionSelector","color":"#223","flags":{},"order":27,"inputs":[{"link":6172,"name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"}}],"bgcolor":"#335","outputs":[{"name":"width","type":"INT","links":[6019]},{"name":"height","type":"INT","links":[6020]}],"properties":{"ver":"a2fe6fa45ce2087d5cda40dae36e5fb895fff01e","aux_id":"if-ai/ComfyUI-WanResolutionSelector","Node name for S&R":"VideoResolutionSelector"},"widgets_values":["T2V14B","Vertical","HQ"]},{"id":582,"pos":[-6788.52490234375,4471.1728515625],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":34,"inputs":[{"link":6020,"name":"","type":"*","widget":{"name":"value"}}],"bgcolor":"#335","outputs":[{"name":"","type":"INT","links":[5562,5767,6022,6024,6123]}],"properties":{"horizontal":false,"showOutputText":false,"widget_ue_connectable":{}}},{"id":2211,"pos":[-6674.89599609375,5216.564453125],"mode":0,"size":[270,266],"type":"ImageResizeKJv2","color":"#223","flags":{"collapsed":false},"order":42,"inputs":[{"link":5667,"name":"image","type":"IMAGE"},{"link":6122,"name":"width","type":"INT","widget":{"name":"width"}},{"link":6123,"name":"height","type":"INT","widget":{"name":"height"}}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5523,6008,6084,6140,6158]},{"name":"width","type":"INT","links":[]},{"name":"height","type":"INT","links":[]}],"properties":{"ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","cnr_id":"comfyui-kjnodes","Node name for S&R":"ImageResizeKJv2","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[768,1024,"lanczos","pad","255,255,255","center",16,"cpu"]},{"id":2426,"pos":[-6346.1826171875,4403.568359375],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":48,"inputs":[{"link":6140,"name":"","type":"*"}],"bgcolor":"#335","outputs":[{"name":"","type":"IMAGE","links":[6141]}],"properties":{"horizontal":false,"showOutputText":false}},{"id":2383,"pos":[-5738.19873046875,4451.16943359375],"mode":0,"size":[140,246.000244140625],"type":"PreviewImage","color":"#223","flags":{},"order":57,"inputs":[{"link":6029,"name":"images","type":"IMAGE"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":581,"pos":[-6783.4833984375,4430.697265625],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":33,"inputs":[{"link":6019,"name":"","type":"*","widget":{"name":"value"}}],"bgcolor":"#335","outputs":[{"name":"","type":"INT","links":[5561,5766,6021,6023,6122,6127]}],"properties":{"horizontal":false,"showOutputText":false,"widget_ue_connectable":{}}},{"id":2206,"pos":[-6677.74853515625,5633.544921875],"mode":0,"size":[270,266],"type":"ImageResizeKJv2","color":"#223","flags":{"collapsed":false},"order":38,"inputs":[{"link":5669,"name":"image","type":"IMAGE"},{"link":5561,"name":"width","type":"INT","widget":{"name":"width"}},{"link":5562,"name":"height","type":"INT","widget":{"name":"height"}}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5519,6009,6159]},{"name":"width","type":"INT","links":[]},{"name":"height","type":"INT","links":[]}],"properties":{"ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","cnr_id":"comfyui-kjnodes","Node name for S&R":"ImageResizeKJv2","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[512,512,"lanczos","pad","255,255,255","center",16,"cpu"]},{"id":2441,"pos":[-10006.7880859375,5547.318359375],"mode":0,"size":[510,180],"type":"MarkdownNote","color":"#223","flags":{},"order":7,"title":"Flux Kontext 提示词技巧","inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["\n## Flux Kontext 提示词技巧\n\n使用英文\n\n### 1. 基础修改\n- 简单直接：`\"Change the car color to red\"`\n- 保持风格：`\"Change to daytime while maintaining the same style of the painting\"`\n\n### 2. 风格转换\n**原则：**\n- 明确命名风格：`\"Transform to Bauhaus art style\"`\n- 描述特征：`\"Transform to oil painting with visible brushstrokes, thick paint texture\"`\n- 保留构图：`\"Change to Bauhaus style while maintaining the original composition\"`\n\n### 3. 角色一致性\n**框架：**\n- 具体描述：`\"The woman with short black hair\"`而非`\"她\"`\n- 保留特征：`\"while maintaining the same facial features, hairstyle, and expression\"`\n- 分步修改：先改背景，再改动作\n\n### 4. 文本编辑\n- 使用引号：`\"Replace 'joy' with 'BFL'\"`\n- 保持格式：`\"Replace text while maintaining the same font style\"`\n\n## 常见问题解决\n\n### 角色变化过大\n❌ 错误：`\"Transform the person into a Viking\"`\n✅ 正确：`\"Change the clothes to be a viking warrior while preserving facial features\"`\n\n### 构图位置改变\n❌ 错误：`\"Put him on a beach\"`\n✅ 正确：`\"Change the background to a beach while keeping the person in the exact same position, scale, and pose\"`\n\n### 风格应用不准确\n❌ 错误：`\"Make it a sketch\"`\n✅ 正确：`\"Convert to pencil sketch with natural graphite lines, cross-hatching, and visible paper texture\"`\n\n## 核心原则\n\n1. **具体明确** - 使用精确描述，避免模糊词汇\n2. **分步编辑** - 复杂修改分为多个简单步骤\n3. **明确保留** - 说明哪些要保持不变\n4. **动词选择** - 用\"更改\"、\"替换\"而非\"转换\"\n\n## 最佳实践模板\n\n**对象修改：**\n`\"Change [object] to [new state], keep [content to preserve] unchanged\"`\n\n**风格转换：**\n`\"Transform to [specific style], while maintaining [composition/character/other] unchanged\"`\n\n**背景替换：**\n`\"Change the background to [new background], keep the subject in the exact same position and pose\"`\n\n**文本编辑：**\n`\"Replace '[original text]' with '[new text]', maintain the same font style\"`\n\n> **记住：** 越具体越好，Kontext 擅长理解详细指令并保持一致性。"]},{"id":2435,"pos":[-9964.25390625,5778.3349609375],"mode":0,"size":[350,100],"type":"MarkdownNote","color":"#223","flags":{},"order":8,"title":"About Flux Kontext Edit","inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["[English] Use Ctrl + B to enable multipule image input.\n\n[中文] 使用 **Ctrl + B** 来启用另一张图片输入"]},{"id":2356,"pos":[-5937.1513671875,5203.2421875],"mode":0,"size":[315,82],"type":"UNETLoader","color":"#223","flags":{},"order":9,"inputs":[],"bgcolor":"#335","outputs":[{"name":"MODEL","type":"MODEL","links":[6082],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"UNETLoader"},"widgets_values":["flux1-kontext-dev.safetensors","default"]},{"id":2385,"pos":[-5645.8505859375,4823.08935546875],"mode":0,"size":[197.712890625,46],"type":"ReferenceLatent","color":"#223","flags":{},"order":66,"inputs":[{"link":6129,"name":"conditioning","type":"CONDITIONING"},{"link":6038,"name":"latent","type":"LATENT","shape":7}],"bgcolor":"#335","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6130]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"ReferenceLatent"},"widgets_values":[]},{"id":2404,"pos":[-5695.04541015625,4909.673828125],"mode":0,"size":[270,58],"type":"FluxGuidance","color":"#223","flags":{},"order":67,"inputs":[{"link":6130,"name":"conditioning","type":"CONDITIONING"}],"bgcolor":"#335","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6162]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"FluxGuidance"},"widgets_values":[2.5]},{"id":2357,"pos":[-5938.21728515625,4858.62255859375],"mode":0,"size":[262.55999755859375,106],"type":"EmptySD3LatentImage","color":"#223","flags":{"collapsed":true},"order":40,"inputs":[{"link":6021,"name":"width","type":"INT","widget":{"name":"width"}},{"link":6022,"name":"height","type":"INT","widget":{"name":"height"}}],"bgcolor":"#335","outputs":[{"name":"LATENT","type":"LATENT","links":[],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1]},{"id":2421,"pos":[-5505.06689453125,5170.8330078125],"mode":0,"size":[140,46],"type":"VAEEncode","color":"#223","flags":{},"order":64,"inputs":[{"link":6143,"name":"pixels","type":"IMAGE"},{"link":6112,"name":"vae","type":"VAE"}],"bgcolor":"#335","outputs":[{"name":"LATENT","type":"LATENT","links":[6166]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":2439,"pos":[-10004.8828125,5331.37841796875],"mode":0,"size":[510,170],"type":"MarkdownNote","color":"#223","flags":{},"order":10,"title":"About VRAM","inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["For reference:\n- **fp8_scaled**: Requires about 20GB of VRAM.\n- **Original**: Requires about 32GB of VRAM.\n\n---\n\n供参考：\n-  **fp8_scaled** :  大概需要 20GB 左右 VRAM \n- **原始权重**:  原始权重，大概需要 32GB 左右 VRAM \n"]},{"id":2440,"pos":[-10005.8349609375,5098.490234375],"mode":0,"size":[510,170],"type":"MarkdownNote","color":"#223","flags":{},"order":11,"title":"Flux Kontext Prompt Techniques","inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["\n## Flux Kontext Prompt Techniques\n\n### 1. Basic Modifications\n- Simple and direct: `\"Change the car color to red\"`\n- Maintain style: `\"Change to daytime while maintaining the same style of the painting\"`\n\n### 2. Style Transfer\n**Principles:**\n- Clearly name style: `\"Transform to Bauhaus art style\"`\n- Describe characteristics: `\"Transform to oil painting with visible brushstrokes, thick paint texture\"`\n- Preserve composition: `\"Change to Bauhaus style while maintaining the original composition\"`\n\n### 3. Character Consistency\n**Framework:**\n- Specific description: `\"The woman with short black hair\"` instead of \"she\"\n- Preserve features: `\"while maintaining the same facial features, hairstyle, and expression\"`\n- Step-by-step modifications: Change background first, then actions\n\n### 4. Text Editing\n- Use quotes: `\"Replace 'joy' with 'BFL'\"`\n- Maintain format: `\"Replace text while maintaining the same font style\"`\n\n## Common Problem Solutions\n\n### Character Changes Too Much\n❌ Wrong: `\"Transform the person into a Viking\"`\n✅ Correct: `\"Change the clothes to be a viking warrior while preserving facial features\"`\n\n### Composition Position Changes\n❌ Wrong: `\"Put him on a beach\"`\n✅ Correct: `\"Change the background to a beach while keeping the person in the exact same position, scale, and pose\"`\n\n### Style Application Inaccuracy\n❌ Wrong: `\"Make it a sketch\"`\n✅ Correct: `\"Convert to pencil sketch with natural graphite lines, cross-hatching, and visible paper texture\"`\n\n## Core Principles\n\n1. **Be Specific and Clear** - Use precise descriptions, avoid vague terms\n2. **Step-by-step Editing** - Break complex modifications into multiple simple steps\n3. **Explicit Preservation** - State what should remain unchanged\n4. **Verb Selection** - Use \"change\", \"replace\" rather than \"transform\"\n\n## Best Practice Templates\n\n**Object Modification:**\n`\"Change [object] to [new state], keep [content to preserve] unchanged\"`\n\n**Style Transfer:**\n`\"Transform to [specific style], while maintaining [composition/character/other] unchanged\"`\n\n**Background Replacement:**\n`\"Change the background to [new background], keep the subject in the exact same position and pose\"`\n\n**Text Editing:**\n`\"Replace '[original text]' with '[new text]', maintain the same font style\"`\n\n> **Remember:** The more specific, the better. Kontext excels at understanding detailed instructions and maintaining consistency. "]},{"id":2387,"pos":[-5900.62255859375,5649.17529296875],"mode":0,"size":[218.1356964111328,106.1471939086914],"type":"Note","color":"#223","flags":{},"order":12,"inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["dpm_adaptive+kl_optimal 18 steps 1.9cfg"]},{"id":2446,"pos":[-5298.185546875,4830.1640625],"mode":0,"size":[315,590],"type":"KSamplerWithNAG","color":"#223","flags":{},"order":68,"inputs":[{"link":6168,"name":"model","type":"MODEL"},{"link":6162,"name":"positive","type":"CONDITIONING"},{"link":6163,"name":"negative","type":"CONDITIONING"},{"link":6164,"name":"nag_negative","type":"CONDITIONING"},{"link":6166,"name":"latent_image","type":"LATENT"},{"link":6165,"name":"seed","type":"INT","widget":{"name":"seed"}},{"link":6190,"name":"steps","type":"INT","widget":{"name":"steps"}}],"bgcolor":"#335","outputs":[{"name":"LATENT","type":"LATENT","links":[6169],"slot_index":0}],"properties":{"ver":"16b4e08302b69a55dd6f48983b2945c8dd6054ab","aux_id":"ChenDarYen/ComfyUI-NAG","Node name for S&R":"KSamplerWithNAG"},"widgets_values":[2025,"fixed",20,1,3,2.5,0.25,0.75,"euler","simple",1]},{"id":1856,"pos":[-10365.9833984375,6114.15673828125],"mode":0,"size":[5776.11328125,120],"type":"Label (rgthree)","color":"#fff0","flags":{"allow_interaction":true},"order":13,"title":"::: tip 💡To fire off **Automatic prompts**, make sure your  `OPENAI_API_KEY` is set in **Machine Secrets**.","inputs":[],"bgcolor":"#fff0","outputs":[],"properties":{"padding":0,"fontSize":120,"fontColor":"#999999","textAlign":"left","fontFamily":"Arial","borderRadius":0,"backgroundColor":"\n\n\n\n\n\n\n\n#e6ccff"}},{"id":2245,"pos":[-7736.96435546875,4556.77001953125],"mode":0,"size":[270,150],"type":"JoinStringMulti","color":"#223","flags":{},"order":31,"inputs":[{"link":5931,"name":"string_1","type":"STRING"},{"link":5932,"name":"string_2","type":"STRING"}],"bgcolor":"#335","outputs":[{"name":"string","type":"STRING","links":[5600,5934]}],"properties":{"ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","cnr_id":"comfyui-kjnodes","Node name for S&R":"JoinStringMulti"},"widgets_values":[2," ",false,null]},{"id":2450,"pos":[-8958.869140625,5538.84375],"mode":0,"size":[400,214],"type":"ComfyUIDeployExternalEnum","color":"#223","flags":{},"order":14,"inputs":[],"bgcolor":"#335","outputs":[{"name":"text","type":"*","links":[6172]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalEnum"},"widgets_values":["aspect_ratio","Vertical","[\"Horizontal\",\"Vertical\",\"Squarish\"]","",""]},{"id":2254,"pos":[-8905.388671875,4879.59716796875],"mode":0,"size":[309.1890563964844,154],"type":"ComfyUIDeployExternalImage","color":"#223","flags":{},"order":32,"inputs":[{"link":5666,"name":"default_value","type":"IMAGE","shape":7}],"bgcolor":"#335","outputs":[{"name":"image","type":"IMAGE","links":[5667]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalImage"},"widgets_values":["input_image1","","","",""]},{"id":2255,"pos":[-8898.06640625,5089.04248046875],"mode":0,"size":[309.1890563964844,154],"type":"ComfyUIDeployExternalImage","color":"#223","flags":{},"order":30,"inputs":[{"link":5668,"name":"default_value","type":"IMAGE","shape":7}],"bgcolor":"#335","outputs":[{"name":"image","type":"IMAGE","links":[5669]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalImage"},"widgets_values":["input_image2","","","",""]},{"id":2200,"pos":[-6035.5302734375,4441.28955078125],"mode":0,"size":[270,270.000244140625],"type":"SaveImage","color":"#223","flags":{},"order":53,"inputs":[{"link":6160,"name":"images","type":"IMAGE"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"SaveImage","widget_ue_connectable":{}},"widgets_values":["ConceptsStitched"]},{"id":2422,"pos":[-5506.646484375,4400.123046875],"mode":0,"size":[270,266],"type":"ImageResizeKJv2","color":"#223","flags":{"collapsed":false},"order":60,"inputs":[{"link":6141,"name":"image","type":"IMAGE"},{"link":6127,"name":"width","type":"INT","widget":{"name":"width"}},{"link":6117,"name":"height","type":"INT","widget":{"name":"height"}}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[6142,6143]},{"name":"width","type":"INT","links":[]},{"name":"height","type":"INT","links":[]}],"properties":{"ver":"5dcda71011870278c35d92ff77a677ed2e538f2d","cnr_id":"comfyui-kjnodes","Node name for S&R":"ImageResizeKJv2","widget_ue_connectable":{"width":true,"height":true}},"widgets_values":[768,1024,"lanczos","resize","255,255,255","center",16,"cpu"]},{"id":2423,"pos":[-5712.83935546875,4406.1884765625],"mode":0,"size":[190.86483764648438,86],"type":"GetImageSizeAndCount","color":"#223","flags":{"collapsed":true},"order":58,"inputs":[{"link":6114,"name":"image","type":"IMAGE"}],"bgcolor":"#335","outputs":[{"name":"image","type":"IMAGE","links":[]},{"name":"width","type":"INT","label":"1104 width","links":[]},{"name":"height","type":"INT","label":"944 height","links":[6117]},{"name":"count","type":"INT","label":"1 count","links":null}],"properties":{"ver":"f9118e0bbb39347ea7becb84ec03e397dfb4f644","cnr_id":"comfyui-kjnodes","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":2430,"pos":[-6377.72021484375,4544.81201171875],"mode":0,"size":[270,150],"type":"ImageStitch","color":"#223","flags":{},"order":49,"inputs":[{"link":6158,"name":"image1","type":"IMAGE"},{"link":6159,"name":"image2","type":"IMAGE","shape":7}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[6160,6161]}],"properties":{"ver":"0.3.41","cnr_id":"comfy-core","Node name for S&R":"ImageStitch"},"widgets_values":["right",true,0,"white"]},{"id":2420,"pos":[-5190.1279296875,4441.89111328125],"mode":0,"size":[140,246],"type":"PreviewImage","color":"#223","flags":{},"order":63,"inputs":[{"link":6142,"name":"images","type":"IMAGE"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":2402,"pos":[-5659.6572265625,5004.83544921875],"mode":0,"size":[197.712890625,26],"type":"FluxDisableGuidance","color":"#223","flags":{},"order":43,"inputs":[{"link":6065,"name":"conditioning","type":"CONDITIONING"}],"bgcolor":"#335","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6163]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"FluxDisableGuidance"},"widgets_values":[]},{"id":2230,"pos":[-6437.96875,4783.060546875],"mode":0,"size":[336,288],"type":"Note","color":"#223","flags":{},"order":15,"inputs":[],"bgcolor":"#335","outputs":[],"properties":{"text":""},"widgets_values":["If you get an error in any of the nodes above make sure the files are in the correct directories.\n\nSee the examples page for the links : https://comfyanonymous.github.io/ComfyUI_examples/flux/\n\nflux1-kontext-dev.safetensors goes in: ComfyUI/models/unet/\n\nt5xxl_fp16.safetensors and clip_l.safetensors go in: ComfyUI/models/clip/\n\nae.safetensors goes in: ComfyUI/models/vae/\n\n\nTip: You can set the weight_dtype above to one of the fp8 types if you have memory issues."]},{"id":2438,"pos":[-10018.81640625,4653.59033203125],"mode":0,"size":[510,400],"type":"MarkdownNote","color":"#223","flags":{},"order":16,"title":"Model links","inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["[tutorial](http://docs.comfy.org/tutorials/flux/flux-1-kontext-dev) | [教程](http://docs.comfy.org/zh-CN/tutorials/flux/flux-1-kontext-dev)\n\n**diffusion model**\n\n- [flux1-dev-kontext_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/flux1-kontext-dev_ComfyUI/resolve/main/split_files/diffusion_models/flux1-dev-kontext_fp8_scaled.safetensors)\n\n**vae**\n\n- [ae.safetensors](https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/blob/main/split_files/vae/ae.safetensors)\n\n**text encoder**\n\n- [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/blob/main/clip_l.safetensors)\n- [t5xxl_fp16.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors) or [t5xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn_scaled.safetensors)\n\nModel Storage Location\n\n```\n📂 ComfyUI/\n├── 📂 models/\n│   ├── 📂 diffusion_models/\n│   │   └── flux1-dev-kontext_fp8_scaled.safetensors\n│   ├── 📂 vae/\n│   │   └── ae.safetensor\n│   └── 📂 text_encoders/\n│       ├── clip_l.safetensors\n│       └── t5xxl_fp16.safetensors 或者 t5xxl_fp8_e4m3fn_scaled.safetensors\n```\n"]},{"id":2449,"pos":[-4937.5185546875,5028.04931640625],"mode":0,"size":[140,46],"type":"VAEDecode","color":"#223","flags":{},"order":69,"inputs":[{"link":6169,"name":"samples","type":"LATENT"},{"link":6170,"name":"vae","type":"VAE"}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[6171]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":996,"pos":[-6069.916015625,4832.015625],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":62,"inputs":[{"link":5936,"name":"","type":"*","widget":{"name":"value"}}],"bgcolor":"#335","outputs":[{"name":"","type":"STRING","links":[5999]}],"properties":{"horizontal":false,"showOutputText":false,"widget_ue_connectable":{}}},{"id":2360,"pos":[-5923.787109375,5000.93359375],"mode":0,"size":[422.84503173828125,164.31304931640625],"type":"CLIPTextEncode","color":"#223","flags":{"collapsed":true},"order":65,"title":"+","inputs":[{"link":5958,"name":"clip","type":"CLIP"},{"link":5999,"name":"text","type":"STRING","widget":{"name":"text"}}],"bgcolor":"#335","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6129],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"CLIPTextEncode"},"widgets_values":["the anime girl with massive fennec ears is wearing cargo pants while sitting on a log in the woods biting into a sandwitch beside a beautiful alpine lake"]},{"id":2463,"pos":[-6069.494140625,4938.876953125],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":29,"inputs":[{"link":6185,"name":"","type":"*","widget":{"name":"value"}}],"bgcolor":"#335","outputs":[{"name":"","type":"STRING","links":[6186]}],"properties":{"horizontal":false,"showOutputText":false,"widget_ue_connectable":{}}},{"id":575,"pos":[-6069.9404296875,5049.97802734375],"mode":0,"size":[75,26],"type":"Reroute","color":"#223","flags":{},"order":26,"inputs":[{"link":3034,"name":"","type":"*","widget":{"name":"value"}}],"bgcolor":"#335","outputs":[{"name":"","type":"INT","links":[6165]}],"properties":{"horizontal":false,"showOutputText":false,"widget_ue_connectable":{}}},{"id":2352,"pos":[-5937.1513671875,5343.2421875],"mode":0,"size":[315,130],"type":"DualCLIPLoader","color":"#223","flags":{},"order":17,"inputs":[],"bgcolor":"#335","outputs":[{"name":"CLIP","type":"CLIP","links":[5958,5960],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"DualCLIPLoader"},"widgets_values":["t5xxl_fp8_e4m3fn_scaled.safetensors","clip_l.safetensors","flux","default"]},{"id":2455,"pos":[-8496.97265625,4905.806640625],"mode":0,"size":[400,200],"type":"ComfyUIDeployExternalText","color":"#223","flags":{},"order":18,"inputs":[],"bgcolor":"#335","outputs":[{"name":"text","type":"STRING","links":[6178]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalText"},"widgets_values":["llm_model","gpt-4.1-mini","","o3-mini\no4-mini\ngpt-4.1\ngpt-4.1-nano"]},{"id":2453,"pos":[-7970.4365234375,4866.92724609375],"mode":0,"size":[283.5269470214844,58],"type":"OpenAIProviderNode","color":"#223","flags":{},"order":28,"inputs":[{"link":null,"name":"context","type":"*","shape":7},{"link":6178,"name":"llm_model","type":"STRING","widget":{"name":"llm_model"}}],"bgcolor":"#335","outputs":[{"name":"context","type":"*","links":[6191]}],"properties":{"ver":"1.0.2","cnr_id":"llm-toolkit","llm_model":"omni-moderation-2024-09-26","Node name for S&R":"OpenAIProviderNode"},"widgets_values":["omni-moderation-2024-09-26"]},{"id":2204,"pos":[-7556.44189453125,4866.70068359375],"mode":0,"size":[429.72283935546875,293.3409423828125],"type":"PromptManager","color":"#223","flags":{},"order":52,"inputs":[{"link":6191,"name":"context","type":"*","shape":7},{"link":6017,"name":"image","type":"IMAGE","shape":7},{"link":null,"name":"mask","type":"MASK","shape":7},{"link":null,"name":"video","type":"IMAGE","shape":7},{"link":5934,"name":"text_prompt","type":"STRING","shape":7,"widget":{"name":"text_prompt"}}],"bgcolor":"#335","outputs":[{"name":"context","type":"*","links":[6173]}],"properties":{"ver":"3d82dbfe091d84868212e5f275deb5447fa4e659","cnr_id":"llm-toolkit","Node name for S&R":"PromptManager","widget_ue_connectable":{}},"widgets_values":["You are a master artist crafting precise visual narratives for text-to-image generation. When given an image or visual description, create a flowing 70 word paragraph following this base on the TASK\n\n**TASK:**\nWe need to create a prompt that will replicate a live action representation of the character in the first image as the person in the second image would play the real life role for a cinematic film production.\nDo not give instructions to the model rather describe the image on how it should look directly.\nTransform the first image to Transform the character into a realistic, high-quality live-action cosplay portrayal featuring the provided Person with slithly stylized pushed proportions to match the body proportions and charcter likeness Acurately describe the facial structure features and characteristics, haistyle, costume, accessories and props and pose of each character from the original picture in order to replace it with the matching actress provided. Keep the composition, poses and costumes of the characters. Transforming the image into the live action representation of the character. Make sure all the visual characteristic from the character in the original image are an accurately LIFELIKE portrayal of the character by the Person. Make sure to mention the type of shot from the reference image to create something similar mostly will be either full body shot or above the knee ","","",""]},{"id":2451,"pos":[-7554.8671875,5214.26513671875],"mode":0,"size":[414.3440246582031,192.80239868164062],"type":"LLMToolkitTextGeneratorStream","color":"#223","flags":{},"order":55,"inputs":[{"link":6173,"name":"context","type":"*","shape":7}],"bgcolor":"#335","outputs":[{"name":"context","type":"*","links":[6174]},{"name":"text","type":"STRING","links":null}],"properties":{"ver":"1.0.2","cnr_id":"llm-toolkit","Node name for S&R":"LLMToolkitTextGeneratorStream"},"widgets_values":["gpt-4o-mini","Write a detailed description of a futuristic city.","Create the character from Image 2 in a realistic style, using the muscular physique, detailed skin texture, and lifelike lighting from Image 1. Preserve the character's iconic green tunic, hat, brown boots, and leather belts with realistic fabric and leather textures. Maintain the original pose and sword-and-shield stance while converting facial features and hair to a natural human appearance, blending fantasy elements with the realism evident in Image 1."]},{"id":2367,"pos":[-5983.10595703125,4352.84375],"mode":0,"size":[187.75448608398438,26],"type":"FluxKontextImageScale","color":"#223","flags":{},"order":54,"inputs":[{"link":6161,"name":"image","type":"IMAGE"}],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5974,6029,6114]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"FluxKontextImageScale"},"widgets_values":[]},{"id":2369,"pos":[-5912.39599609375,4906.69921875],"mode":0,"size":[140,46],"type":"VAEEncode","color":"#223","flags":{},"order":56,"inputs":[{"link":5974,"name":"pixels","type":"IMAGE"},{"link":5975,"name":"vae","type":"VAE"}],"bgcolor":"#335","outputs":[{"name":"LATENT","type":"LATENT","links":[6038]}],"properties":{"ver":"0.3.43","cnr_id":"comfy-core","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":2408,"pos":[-4975.36083984375,5466.64501953125],"mode":0,"size":[395.9153747558594,550.0856323242188],"type":"Image Comparer (rgthree)","color":"#223","flags":{},"order":47,"inputs":[{"dir":3,"link":null,"name":"image_a","type":"IMAGE"},{"dir":3,"link":6084,"name":"image_b","type":"IMAGE"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"84a146fee39f7b3a8c6631dcac29bc13b077eb49","cnr_id":"rgthree-comfy","comparer_mode":"Slide"},"widgets_values":[[{"url":"/api/view?filename=rgthree.compare._temp_jbbiq_00005_.png&type=temp&subfolder=&rand=0.6469174504797635","name":"B","selected":true}]]},{"id":2359,"pos":[-5419.2353515625,5480.53271484375],"mode":0,"size":[412.97845458984375,627.7481689453125],"type":"SaveImage","color":"#223","flags":{},"order":70,"inputs":[{"link":6171,"name":"images","type":"IMAGE"}],"bgcolor":"#335","outputs":[],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":2361,"pos":[-5936.62744140625,5066.66845703125],"mode":0,"size":[236.00331115722656,92.72785949707031],"type":"CLIPTextEncode","color":"#223","flags":{"collapsed":false},"order":35,"title":"-","inputs":[{"link":5960,"name":"clip","type":"CLIP","label":"clip"},{"link":6186,"name":"text","type":"STRING","widget":{"name":"text"}}],"bgcolor":"#335","outputs":[{"name":"CONDITIONING","type":"CONDITIONING","label":"CONDITIONING","links":[6065,6164],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"CLIPTextEncode"},"widgets_values":["toddler, dark, darkness, low quality, sketch, cartoon, comic, anime, illustration, painting, toy, (hands), text, error, cropped"]},{"id":2386,"pos":[-8946.4892578125,5293.37890625],"mode":0,"size":[400,200],"type":"ComfyUIDeployExternalText","color":"#223","flags":{},"order":19,"inputs":[],"bgcolor":"#335","outputs":[{"name":"text","type":"STRING","links":[6185]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalText"},"widgets_values":["Negative_prompt","short-legs, big-head, dwarf, toddler, dark, darkness, low quality, sketch, cartoon, comic, anime, illustration, painting, toy, (hands), text, error, cropped","",""]},{"id":2208,"pos":[-6999.14404296875,5601.79541015625],"mode":0,"size":[274.080078125,314.00006103515625],"type":"LoadImage","color":"#223","flags":{},"order":20,"inputs":[],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5668]},{"name":"MASK","type":"MASK","links":null}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["71b73334309a860bfcb81c0642b3d8d3.jpg","image"]},{"id":533,"pos":[-8493.87109375,5162.5205078125],"mode":0,"size":[404.58721923828125,321.0223388671875],"type":"ComfyUIDeployExternalText","color":"#223","flags":{},"order":21,"inputs":[],"bgcolor":"#335","outputs":[{"name":"text","type":"STRING","links":[5932]}],"properties":{"ver":"b889f79baf9e099d5e54bd20bab4aa1e7c3296c0","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalText","widget_ue_connectable":{}},"widgets_values":["ACTION_MANUAL_PROMPT","create the same character in realistic style","MANUA_PROMPT ","IF there is no OPENAI_API_KEY on the machine secrets. You will need to enter your full prompt and delete the AI_SYSTEM_PROMPT  \n\nOtherwise you can use this to add a The Task to be preform by the model for example \"replace the cat from image1 with the dog on image2\" \n\nshe is wearing the same clothes but it has the logo on the swimsuit make sure it looks well integrated and part of the same material with the fabric and not just an overlay the logo should wrap with the swinsuit to the body of the model "]},{"id":2346,"pos":[-5937.20556640625,5821.99658203125],"mode":0,"size":[315,130],"type":"ModelSamplingFlux","color":"#223","flags":{},"order":41,"inputs":[{"link":6082,"name":"model","type":"MODEL"},{"link":6023,"name":"width","type":"INT","widget":{"name":"width"}},{"link":6024,"name":"height","type":"INT","widget":{"name":"height"}}],"bgcolor":"#335","outputs":[{"name":"MODEL","type":"MODEL","links":[6168],"slot_index":0}],"properties":{"ver":"0.3.40","cnr_id":"comfy-core","Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.15,0.5,1024,1024]},{"id":2080,"pos":[-7573.36181640625,5801.3486328125],"mode":0,"size":[394.4351501464844,88],"type":"Note","color":"#223","flags":{},"order":22,"inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["CREATE AUTOMATIC PROMPTS FROM YOUR REFERENCE \nYOU NEED TO SET THE SECRETS ON THE MACHINE OR YOUR ENVS ON THE pc"]},{"id":2081,"pos":[-8507.87890625,4669.58935546875],"mode":0,"size":[394.4351501464844,88],"type":"Note","color":"#223","flags":{},"order":23,"title":"EXTERNAL NODES","inputs":[],"bgcolor":"#335","outputs":[],"properties":{},"widgets_values":["COMFY-DEPLOY HAS A PLAYFGROUND FEATURE YOU CAN USE EXTERNAL NODES TO SERVE THE WORKFLOWS ON PLAYGROUND OR WEB APPS WITHOUT EVER HAVING TO SEE THE NODES OR DEAL WITH ANY OF THE WORKFLOW YOU JUST SEE INPUTS AND OUTPUTS -- PASS GO --> COMFYDEPLOY.COM "]},{"id":2213,"pos":[-6995.43505859375,5189.958984375],"mode":0,"size":[274.080078125,314.00006103515625],"type":"LoadImage","color":"#223","flags":{},"order":24,"inputs":[],"bgcolor":"#335","outputs":[{"name":"IMAGE","type":"IMAGE","links":[5666]},{"name":"MASK","type":"MASK","links":null}],"properties":{"ver":"0.3.38","cnr_id":"comfy-core","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["Arnold-Schwarzenegger-title-character-Conan-the-Destroyer.webp","image"]},{"id":2465,"pos":[-8065.7412109375,5273.09326171875],"mode":0,"size":[400,200],"type":"ComfyUIDeployExternalNumberInt","color":"#223","flags":{},"order":25,"inputs":[],"bgcolor":"#335","outputs":[{"name":"value","type":"INT","links":[6190]}],"properties":{"ver":"089bad55605392860e59476a4c2765bfc772750b","cnr_id":"comfyui-deploy","Node name for S&R":"ComfyUIDeployExternalNumberInt"},"widgets_values":["steps",20,"",""]}],"config":{},"groups":[{"id":46,"color":"#88A","flags":{},"title":"SIZE","bounding":[-6800.02392578125,4379.95703125,99.70211791992188,125.5982894897461],"font_size":24},{"id":47,"color":"#88A","flags":{},"title":"SEED","bounding":[-6077.3154296875,5008.85888671875,95,79.5999984741211],"font_size":24},{"id":66,"color":"#88A","flags":{},"title":"EXTERNAL_NODES","bounding":[-9339.36328125,4798.19287109375,1694.161376953125,1270.6627197265625],"font_size":24},{"id":67,"color":"#88A","flags":{},"title":"BATCH_IMAGES_REFs","bounding":[-7048.24462890625,4814.9658203125,290,272.4183654785156],"font_size":24},{"id":123,"color":"#88A","flags":{},"title":"+","bounding":[-6079.916015625,4795.3681640625,95,79.5999984741211],"font_size":24},{"id":197,"color":"#88A","flags":{},"title":"TEXT","bounding":[-7406.47998046875,4242.2421875,334.927734375,523.0836181640625],"font_size":24},{"id":203,"color":"#88A","flags":{},"title":"STITCH_IMAGES_FOR_SHOWCASE","bounding":[-6517.3671875,4318.03662109375,1494.078857421875,395.7764587402344],"font_size":24},{"id":204,"color":"#88A","flags":{},"title":"RESTYLE_PROMPT_ACTRESS","bounding":[-7584.45751953125,4798.375,489.11566162109375,947.2745361328125],"font_size":24},{"id":205,"color":"#88A","flags":{},"title":"Concept2","bounding":[-7028.07568359375,5526.4794921875,1053.3349609375,397.6000061035156],"font_size":24},{"id":206,"color":"#88A","flags":{},"title":"Concept1","bounding":[-7025.22314453125,5109.4990234375,1053.3349609375,397.6000061035156],"font_size":24},{"id":209,"color":"#88A","flags":{},"title":"HELP","bounding":[-10028.81640625,4579.990234375,543.93408203125,1308.3446044921875],"font_size":24},{"id":210,"color":"#88A","flags":{},"title":"-","bounding":[-6079.646484375,4893.19189453125,95,79.5999984741211],"font_size":24}],"version":0.4,"revision":0,"environment":{"gpu":"L40S","extra_args":null,"run_timeout":300,"machine_hash":"7c5a145b1f1c5d1fbb932f9d0660bff3b84bf32ba7c6c745e76d1e7a46b6dcb5","max_containers":1,"min_containers":0,"python_version":"3.11","comfyui_version":"e18f53cca9062cc6b165e16712772437b80333f2","disable_metadata":true,"prestart_command":null,"scaledown_window":60,"base_docker_image":null,"docker_command_steps":{"steps":[{"id":"30ad3221-9","data":{"url":"https://github.com/rgthree/rgthree-comfy","hash":"f754c4765849aa748abb35a1f030a5ed6474a69b","meta":{"message":"Power Puter: Add for loop, and augassign capabilities.","committer":{"date":"2025-06-23T04:15:18.000Z","name":"rgthree","email":"regis.gaughan@gmail.com"},"commit_url":"https://github.com/rgthree/rgthree-comfy/commit/f754c4765849aa748abb35a1f030a5ed6474a69b","latest_hash":"f754c4765849aa748abb35a1f030a5ed6474a69b","stargazers_count":2003},"name":"rgthree's ComfyUI Nodes","files":["https://github.com/rgthree/rgthree-comfy"],"install_type":"git-clone"},"type":"custom-node"},{"id":"88d3ce55-d","data":{"url":"https://github.com/kijai/ComfyUI-KJNodes","hash":"f7eb33abc80a2aded1b46dff0dd14d07856a7d50","meta":{"message":"I remembered\n\nShould keep the id or node title methods viable, though not recommended","committer":{"date":"2025-06-18T08:03:51.000Z","name":"kijai","email":"40791699+kijai@users.noreply.github.com"},"commit_url":"https://github.com/kijai/ComfyUI-KJNodes/commit/f7eb33abc80a2aded1b46dff0dd14d07856a7d50","latest_hash":"f7eb33abc80a2aded1b46dff0dd14d07856a7d50","stargazers_count":1481},"name":"KJNodes for ComfyUI","files":["https://github.com/kijai/ComfyUI-KJNodes"],"install_type":"git-clone"},"type":"custom-node"},{"id":"9fe1edb4-6","data":{"url":"https://github.com/807502278/ComfyUI-WJNodes","hash":"f950a3ffceca450491fcd1d603e1dd5b582922e2","meta":{"message":"Merge pull request #2 from ComfyNodePRs/publish\n\nAdd Github Action for Publishing to Comfy Registry","committer":{"date":"2025-06-16T03:44:19.000Z","name":"GitHub","email":"noreply@github.com"},"commit_url":"https://github.com/807502278/ComfyUI-WJNodes/commit/f950a3ffceca450491fcd1d603e1dd5b582922e2","latest_hash":"f950a3ffceca450491fcd1d603e1dd5b582922e2","stargazers_count":11},"name":"ComfyUI-WJNodes","files":["https://github.com/807502278/ComfyUI-WJNodes"],"install_type":"git-clone"},"type":"custom-node"},{"id":"25d94b53-c","data":{"url":"https://github.com/Lightricks/ComfyUI-LTXVideo","hash":"e87087e95af3c9e0a9d48e75c97ea471ad9284dc","meta":{"message":"Merge pull request #243 from Lightricks/pr-2025-06-20\n\nUpdate ComfyUI-LTXVideo - 2025-06-20","committer":{"date":"2025-06-20T14:01:32.000Z","name":"GitHub","email":"noreply@github.com"},"commit_url":"https://github.com/Lightricks/ComfyUI-LTXVideo/commit/e87087e95af3c9e0a9d48e75c97ea471ad9284dc","latest_hash":"e87087e95af3c9e0a9d48e75c97ea471ad9284dc","stargazers_count":2095},"name":"ComfyUI-LTXVideo","files":["https://github.com/Lightricks/ComfyUI-LTXVideo"],"install_type":"git-clone"},"type":"custom-node"},{"id":"129ab72d-0","data":{"url":"https://github.com/1038lab/ComfyUI-RMBG","hash":"8577848f31ed7dcf19b920451e7e90fad17cbc3b","meta":{"message":"Add files via upload","committer":{"date":"2025-06-01T21:28:56.000Z","name":"GitHub","email":"noreply@github.com"},"commit_url":"https://github.com/1038lab/ComfyUI-RMBG/commit/8577848f31ed7dcf19b920451e7e90fad17cbc3b","latest_hash":"8577848f31ed7dcf19b920451e7e90fad17cbc3b","stargazers_count":1090},"name":"ComfyUI-RMBG","files":["https://github.com/1038lab/ComfyUI-RMBG"],"install_type":"git-clone"},"type":"custom-node"},{"id":"264e1b21-3","data":{"url":"https://github.com/LAOGOU-666/Comfyui_LG_Tools","hash":"c0efd16fcec289d2f2c93f2c3526b225c922410b","meta":{"message":"更新桥接预览V2遮罩反转问题","committer":{"date":"2025-06-12T09:20:27.000Z","name":"LAOGOU-666","email":"441059767@qq.com"},"commit_url":"https://github.com/LAOGOU-666/Comfyui_LG_Tools/commit/c0efd16fcec289d2f2c93f2c3526b225c922410b","latest_hash":"c0efd16fcec289d2f2c93f2c3526b225c922410b","stargazers_count":142},"name":"Comfyui_LG_Tools","files":["https://github.com/LAOGOU-666/Comfyui_LG_Tools"],"install_type":"git-clone"},"type":"custom-node"},{"id":"0845e856-4","data":"WORKDIR /comfyui/custom_nodes\n\n# 1) Clone & install the ReActor node\nRUN git clone --recursive https://github.com/if-ai/ComfyUI-ReActor.git && \\\n    cd ComfyUI-ReActor && \\\n    if [ -f install.py ]; then \\\n      python install.py || echo 'install script failed'; \\\n    fi\n","type":"commands"},{"id":"5ac784e7-6","data":{"url":"https://github.com/BennyKok/comfyui-deploy","hash":"089bad55605392860e59476a4c2765bfc772750b","name":"ComfyUI Deploy","files":[],"install_type":"git-clone"},"type":"custom-node"},{"id":"51288182-6","data":{"url":"https://github.com/niknah/quick-connections","hash":"a1377f2b06cea688226353660f0264163dcc1e72","meta":{"message":"Merge pull request #21 from ComfyNodePRs/update-publish-yaml\n\nUpdate Github Action for Publishing to Comfy Registry","committer":{"date":"2025-03-27T22:16:29.000Z","name":"GitHub","email":"noreply@github.com"},"latest_hash":"a1377f2b06cea688226353660f0264163dcc1e72"},"name":"quick-connections","files":["https://github.com/niknah/quick-connections"],"install_type":"git-clone"},"type":"custom-node"},{"id":"2c9c73ac-c","data":{"url":"https://github.com/Fannovel16/comfyui_controlnet_aux","hash":"59b027e088c1c8facf7258f6e392d16d204b4d27","meta":{"message":"Push to registry","committer":{"date":"2025-06-20T08:57:29.000Z","name":"GitHub","email":"noreply@github.com"},"latest_hash":"59b027e088c1c8facf7258f6e392d16d204b4d27"},"name":"comfyui_controlnet_aux","files":["https://github.com/Fannovel16/comfyui_controlnet_aux"],"install_type":"git-clone"},"type":"custom-node"},{"id":"fc03412f-f","data":{"url":"https://github.com/ClownsharkBatwing/RES4LYF","hash":"34ef8214b84abbd365e05d473c747f37fbb4d677","meta":{"message":"Add files via upload","committer":{"date":"2025-06-26T14:03:38.000Z","name":"GitHub","email":"noreply@github.com"},"latest_hash":"34ef8214b84abbd365e05d473c747f37fbb4d677"},"name":"RES4LYF","files":["https://github.com/ClownsharkBatwing/RES4LYF"],"install_type":"git-clone"},"type":"custom-node"},{"id":"4858519f-c","data":{"url":"https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl","hash":"2b95c2c866399ca1914b4da486fe52808f7a9c60","meta":{"message":"fix mask bug","committer":{"date":"2025-04-19T08:47:58.000Z","name":"kaidu","email":"git@k-du.de"},"latest_hash":"2b95c2c866399ca1914b4da486fe52808f7a9c60"},"name":"Advanced Reflux control","files":["https://github.com/kaibioinfo/ComfyUI_AdvancedRefluxControl"],"install_type":"git-clone"},"type":"custom-node"},{"id":"9901bc52-d","data":{"url":"https://github.com/chflame163/ComfyUI_LayerStyle","hash":"3bfe8e435d167b4a5bf08716729f89802dbbaa6f","meta":{"message":"remove LUT Apply node debug info","committer":{"date":"2025-06-20T00:44:58.000Z","name":"chflame163","email":"chflame@163.com"},"commit_url":"https://github.com/chflame163/ComfyUI_LayerStyle/commit/3bfe8e435d167b4a5bf08716729f89802dbbaa6f","latest_hash":"3bfe8e435d167b4a5bf08716729f89802dbbaa6f","stargazers_count":2358},"name":"ComfyUI Layer Style","files":[],"install_type":"git-clone"},"type":"custom-node"},{"id":"0b85cd6c-a","data":{"url":"https://github.com/kijai/ComfyUI-DepthAnythingV2","hash":"d505cbca99803fc63327b8305618a23e59a18b42","meta":{"message":"Add giant model\n\nhttps://huggingface.co/Nap/depth_anything_v2_vitg","committer":{"date":"2025-06-16T13:16:50.000Z","name":"kijai","email":"40791699+kijai@users.noreply.github.com"},"commit_url":"https://github.com/kijai/ComfyUI-DepthAnythingV2/commit/d505cbca99803fc63327b8305618a23e59a18b42","latest_hash":"d505cbca99803fc63327b8305618a23e59a18b42","stargazers_count":329},"name":"ComfyUI-DepthAnythingV2","files":[],"install_type":"git-clone"},"type":"custom-node"},{"id":"19581e7f-6","data":{"url":"https://github.com/if-ai/ComfyUI-WanResolutionSelector","hash":"a2fe6fa45ce2087d5cda40dae36e5fb895fff01e","meta":{"message":"fix readme","committer":{"date":"2025-06-20T19:40:30.000Z","name":"ImpactFrames","email":"impactframes@outlook.com"},"commit_url":"https://github.com/if-ai/ComfyUI-WanResolutionSelector/commit/a2fe6fa45ce2087d5cda40dae36e5fb895fff01e","latest_hash":"a2fe6fa45ce2087d5cda40dae36e5fb895fff01e","stargazers_count":0},"name":"ComfyUI-WanResolutionSelector","files":[],"install_type":"git-clone"},"type":"custom-node"},{"id":"42e1f459-8","data":{"url":"https://github.com/pythongosssss/ComfyUI-Custom-Scripts","hash":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","meta":{"message":"Update pyproject.toml","committer":{"date":"2025-04-30T12:00:09.000Z","name":"GitHub","email":"noreply@github.com"},"commit_url":"https://github.com/pythongosssss/ComfyUI-Custom-Scripts/commit/aac13aa7ce35b07d43633c3bbe654a38c00d74f5","latest_hash":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","stargazers_count":2512},"name":"ComfyUI-Custom-Scripts","files":[],"install_type":"git-clone"},"type":"custom-node"},{"id":"d412a5d6-5","data":{"url":"https://github.com/ChenDarYen/ComfyUI-NAG","hash":"5c4e4f8c109a1428317ca0e6d3479d4cf7bbb5a7","meta":{"message":"fix multi batches issue","committer":{"date":"2025-06-28T10:20:47.000Z","name":"Chen Dar-Yen","email":"chendaryen@outlook.com"},"commit_url":"https://github.com/ChenDarYen/ComfyUI-NAG/commit/5c4e4f8c109a1428317ca0e6d3479d4cf7bbb5a7","latest_hash":"5c4e4f8c109a1428317ca0e6d3479d4cf7bbb5a7","stargazers_count":62},"name":"ComfyUI-NAG","files":[],"install_type":"git-clone"},"type":"custom-node"},{"id":"6a451f97-f","data":{"url":"https://github.com/if-ai/comfyui-llm-toolkit.git","hash":"4f885f0bb5bf90d962b2e42241c63e2d90ba5a9b","meta":{"message":"Add files via upload","committer":{"date":"2025-06-28T15:51:56.000Z","name":"GitHub","email":"noreply@github.com"},"latest_hash":"4f885f0bb5bf90d962b2e42241c63e2d90ba5a9b"},"name":"comfyui-llm-toolkit.git","files":["https://github.com/if-ai/comfyui-llm-toolkit.git"],"install_type":"git-clone"},"type":"custom-node"}]},"extra_docker_commands":[],"install_custom_node_with_gpu":false},"last_link_id":6192,"last_node_id":2465,"workflow_api":{"533":{"_meta":{"title":"External Text (ComfyUI Deploy)"},"inputs":{"input_id":"ACTION_MANUAL_PROMPT","description":"IF there is no OPENAI_API_KEY on the machine secrets. You will need to enter your full prompt and delete the AI_SYSTEM_PROMPT  \n\nOtherwise you can use this to add a The Task to be preform by the model for example \"replace the cat from image1 with the dog on image2\" \n\nshe is wearing the same clothes but it has the logo on the swimsuit make sure it looks well integrated and part of the same material with the fabric and not just an overlay the logo should wrap with the swinsuit to the body of the model ","display_name":"MANUA_PROMPT ","default_value":"create the same character in realistic style"},"class_type":"ComfyUIDeployExternalText"},"1059":{"_meta":{"title":"External Seed (ComfyUI Deploy)"},"inputs":{"input_id":"input_seed","max_value":4294967295,"min_value":1,"description":"For default value:\n\"-1\" (i.e. not in range): Randomize within the min and max value range. \nin range: Fixed, always the same value\n","display_name":"","default_value":-1},"class_type":"ComfyUIDeployExternalSeed"},"2086":{"_meta":{"title":"Image Batch Multi"},"inputs":{"image_1":["2211",0],"image_2":["2206",0],"inputcount":2,"Update inputs":null},"class_type":"ImageBatchMulti"},"2099":{"_meta":{"title":"Text Output (ComfyDeploy)"},"inputs":{"text":["2203",4],"file_type":"txt","output_id":"output_text","filename_prefix":"ComfyUI"},"class_type":"ComfyDeployOutputText"},"2100":{"_meta":{"title":"Display Any (rgthree)"},"inputs":{"output":"","source":["2245",0]},"class_type":"Display Any (rgthree)"},"2200":{"_meta":{"title":"Save Image"},"inputs":{"images":["2430",0],"filename_prefix":"ConceptsStitched"},"class_type":"SaveImage"},"2203":{"_meta":{"title":"Display Text (LLMToolkit)"},"inputs":{"select":"0","context":["2451",0],"Display_Text_0":"Create the character from Image 2 in a realistic style, using the muscular physique, detailed skin texture, and lifelike lighting from Image 1. Preserve the character's iconic green tunic, hat, brown boots, and leather belts with realistic fabric and leather textures. Maintain the original pose and sword-and-shield stance while converting facial features and hair to a natural human appearance, blending fantasy elements with the realism evident in Image 1."},"class_type":"Display_Text"},"2204":{"_meta":{"title":"Prompt Manager (LLMToolkit)"},"inputs":{"url":"","image":["2086",0],"context":["2453",0],"file_path":"","audio_path":"","text_prompt":["2245",0]},"class_type":"PromptManager"},"2206":{"_meta":{"title":"Resize Image v2"},"inputs":{"image":["2255",0],"width":["2381",0],"device":"cpu","height":["2381",1],"pad_color":"255,255,255","divisible_by":16,"crop_position":"center","upscale_method":"lanczos","keep_proportion":"pad"},"class_type":"ImageResizeKJv2"},"2207":{"_meta":{"title":"BiRefNet Remove Background (RMBG)"},"inputs":{"image":["2206",0],"model":"BiRefNet-general","mask_blur":1,"background":"Color","mask_offset":0,"invert_output":false,"background_color":["2209",0],"refine_foreground":false},"class_type":"BiRefNetRMBG"},"2208":{"_meta":{"title":"Load Image"},"inputs":{"image":"71b73334309a860bfcb81c0642b3d8d3.jpg"},"class_type":"LoadImage"},"2209":{"_meta":{"title":"Color Input (RMBG) 🎨"},"inputs":{"color":"","preset":"white"},"class_type":"AILab_ColorInput"},"2211":{"_meta":{"title":"Resize Image v2"},"inputs":{"image":["2254",0],"width":["2381",0],"device":"cpu","height":["2381",1],"pad_color":"255,255,255","divisible_by":16,"crop_position":"center","upscale_method":"lanczos","keep_proportion":"pad"},"class_type":"ImageResizeKJv2"},"2212":{"_meta":{"title":"BiRefNet Remove Background (RMBG)"},"inputs":{"image":["2211",0],"model":"BiRefNet-general","mask_blur":1,"background":"Color","mask_offset":0,"invert_output":false,"background_color":["2214",0],"refine_foreground":false},"class_type":"BiRefNetRMBG"},"2213":{"_meta":{"title":"Load Image"},"inputs":{"image":"Arnold-Schwarzenegger-title-character-Conan-the-Destroyer.webp"},"class_type":"LoadImage"},"2214":{"_meta":{"title":"Color Input (RMBG) 🎨"},"inputs":{"color":"","preset":"white"},"class_type":"AILab_ColorInput"},"2245":{"_meta":{"title":"Join String Multi"},"inputs":{"string_1":["2264",0],"string_2":["533",0],"delimiter":" ","inputcount":2,"return_list":false,"Update inputs":null},"class_type":"JoinStringMulti"},"2254":{"_meta":{"title":"External Image (ComfyUI Deploy)"},"inputs":{"input_id":"input_image1","description":"","display_name":"","default_value":["2213",0],"default_value_url":""},"class_type":"ComfyUIDeployExternalImage"},"2255":{"_meta":{"title":"External Image (ComfyUI Deploy)"},"inputs":{"input_id":"input_image2","description":"","display_name":"","default_value":["2208",0],"default_value_url":""},"class_type":"ComfyUIDeployExternalImage"},"2264":{"_meta":{"title":"External Text (ComfyUI Deploy)"},"inputs":{"input_id":"AI_SYSTEM_PROMPT","description":"FOR OTHER GENERAL TASKS COPY THIS plus write the task at the end after **TASK:**\n\n\nYou are a master artist crafting precise visual narratives for text-to-image generation. When given an image or visual description, create a flowing 70 word paragraph following this base on the TASK\n\n### 1. Basic Modifications\n- Simple and direct: \"Change the car color to red\"\n- Maintain style: \"Change to daytime while maintaining the same style of the painting\"\n\n### 2. Style Transfer\n**Principles:**\n- Clearly name style: \"Transform to Bauhaus art style\"\n- Describe characteristics: \"Transform to oil painting with visible brushstrokes, thick paint texture\"\n- Preserve composition: \"Change to Bauhaus style while maintaining the original composition\"\n\n### 3. Character Consistency\n**Framework:**\n- Specific description: \"The woman with short black hair\" instead of \"she\"\n- Preserve features: \"while maintaining the same facial features, hairstyle, and expression\"\n- Step-by-step modifications: Change background first, then actions\n\n### 4. Text Editing\n- Use quotes: \"Replace 'joy' with 'BFL'\"\n- Maintain format: \"Replace text while maintaining the same font style\"\n\n## Common Problem Solutions\n\n### Character Changes Too Much\n❌ Wrong: \"Transform the person into a Viking\"\n✅ Correct: \"Change the clothes to be a viking warrior while preserving facial features\"\n\n### Composition Position Changes\n❌ Wrong: \"Put him on a beach\"\n✅ Correct: \"Change the background to a beach while keeping the person in the exact same position, scale, and pose\"\n\n### Style Application Inaccuracy\n❌ Wrong: \"Make it a sketch\"\n✅ Correct: \"Convert to pencil sketch with natural graphite lines, cross-hatching, and visible paper texture\"\n\n## Core Principles\n\n1. **Be Specific and Clear** - Use precise descriptions, avoid vague terms\n2. **Step-by-step Editing** - Break complex modifications into multiple simple steps\n3. **Explicit Preservation** - State what should remain unchanged\n4. **Verb Selection** - Use \"change\", \"replace\" rather than \"transform\"\n\n## Best Practice Templates\n\n**Object Modification:**\n\"Change [object] to [new state], keep [content to preserve] unchanged\"\n\n**Style Transfer:**\n\"Transform to [specific style], while maintaining [composition/character/other] unchanged\"\n\n**Background Replacement:**\n\"Change the background to [new background], keep the subject in the exact same position and pose\"\n\n**Text Editing:**\n\"Replace '[original text]' with '[new text]', maintain the same font style\"\n\n> **Remember:** The more specific, the better. Kontext excels at understanding detailed instructions and maintaining consistency. \n\n**TASK:**","display_name":"","default_value":"You are Kontext, a master artist who converts editing requests into a single, flowing paragraph of exactly 70 words. Every user request arrives with two images:\n\nImage 1 – Subject. This is the frame that must be edited.\n\nImage 2 – Reference. Provide background, style, texture, palette, or any other visual attribute the task demands.\n\nTask-Resolution Logic\n• change/replace background → substitute Image 1’s backdrop; keep Image 1’s subject unchanged; set new backdrop from Image 2\n• restyle / apply style / transfer style → style-transfer onto Image 1; extract colours, brushwork, medium, lighting cues from Image 2\n• simple/object modification → edit only the named object in Image 1; ignore Image 2 unless explicitly referenced\n• text editing → replace characters or words in Image 1; copy fonts and formatting from Image 1; Image 2 unused unless asked\n\nIf multiple actions are needed, narrate them step-by-step within the 70-word limit.\n\nWriting Rules\n\nBe specific and clear – name objects, colours, styles precisely.\n\nExplicit preservation – state what remains unchanged (pose, facial features, composition).\n\nSequential editing – describe edits in logical order (background, then attire, then lighting).\n\nApproved verbs – change, replace, convert, adjust; avoid vague verbs like transform unless paired with detail.\n\nCharacter consistency – use clear identifiers (“the woman with short black hair”) and preserve features.\n\nQuotes for text edits – put new and old text in quotes; keep font and layout intact.\n\nBest-Practice Templates\nBackground replacement: “Change the background to [new setting] from Image 2, keep the subject in the exact same position and pose.”\nStyle transfer: “Convert Image 1 to [specific style from Image 2] while maintaining composition, proportions, and lighting.”\nObject modification: “Change [object] in Image 1 to [new state], keep all else unchanged.”\nText editing: “Replace ‘[original]’ with ‘[new]’, preserve original font and placement.”\n\nRemember: Produce exactly 70 words describing the final image edits. If the user’s request is ambiguous, ask a clarifying question once before proceeding.\n"},"class_type":"ComfyUIDeployExternalText"},"2280":{"_meta":{"title":"Display Any (rgthree)"},"inputs":{"output":"","source":["2381",0]},"class_type":"Display Any (rgthree)"},"2281":{"_meta":{"title":"Display Any (rgthree)"},"inputs":{"output":"","source":["2381",1]},"class_type":"Display Any (rgthree)"},"2346":{"_meta":{"title":"ModelSamplingFlux"},"inputs":{"model":["2356",0],"width":["2381",0],"height":["2381",1],"max_shift":1.15,"base_shift":0.5},"class_type":"ModelSamplingFlux"},"2348":{"_meta":{"title":"Load VAE"},"inputs":{"vae_name":"ae.sft"},"class_type":"VAELoader"},"2352":{"_meta":{"title":"DualCLIPLoader"},"inputs":{"type":"flux","device":"default","clip_name1":"t5xxl_fp8_e4m3fn_scaled.safetensors","clip_name2":"clip_l.safetensors"},"class_type":"DualCLIPLoader"},"2356":{"_meta":{"title":"Load Diffusion Model"},"inputs":{"unet_name":"flux1-kontext-dev.safetensors","weight_dtype":"default"},"class_type":"UNETLoader"},"2357":{"_meta":{"title":"EmptySD3LatentImage"},"inputs":{"width":["2381",0],"height":["2381",1],"batch_size":1},"class_type":"EmptySD3LatentImage"},"2359":{"_meta":{"title":"Save Image"},"inputs":{"images":["2449",0],"filename_prefix":"ComfyUI"},"class_type":"SaveImage"},"2360":{"_meta":{"title":"+"},"inputs":{"clip":["2352",0],"text":["2203",4]},"class_type":"CLIPTextEncode"},"2361":{"_meta":{"title":"-"},"inputs":{"clip":["2352",0],"text":["2386",0]},"class_type":"CLIPTextEncode"},"2367":{"_meta":{"title":"FluxKontextImageScale"},"inputs":{"image":["2430",0]},"class_type":"FluxKontextImageScale"},"2369":{"_meta":{"title":"VAE Encode"},"inputs":{"vae":["2348",0],"pixels":["2367",0]},"class_type":"VAEEncode"},"2381":{"_meta":{"title":"Video Resolution Selector 🎬"},"inputs":{"mode":"T2V14B","quality":"HQ","aspect_ratio":["2450",0]},"class_type":"VideoResolutionSelector"},"2383":{"_meta":{"title":"Preview Image"},"inputs":{"images":["2367",0]},"class_type":"PreviewImage"},"2385":{"_meta":{"title":"ReferenceLatent"},"inputs":{"latent":["2369",0],"conditioning":["2360",0]},"class_type":"ReferenceLatent"},"2386":{"_meta":{"title":"External Text (ComfyUI Deploy)"},"inputs":{"input_id":"Negative_prompt","description":"","display_name":"","default_value":"short-legs, big-head, dwarf, toddler, dark, darkness, low quality, sketch, cartoon, comic, anime, illustration, painting, toy, (hands), text, error, cropped"},"class_type":"ComfyUIDeployExternalText"},"2402":{"_meta":{"title":"FluxDisableGuidance"},"inputs":{"conditioning":["2361",0]},"class_type":"FluxDisableGuidance"},"2404":{"_meta":{"title":"FluxGuidance"},"inputs":{"guidance":2.5,"conditioning":["2385",0]},"class_type":"FluxGuidance"},"2408":{"_meta":{"title":"Image Comparer (rgthree)"},"inputs":{"image_b":["2211",0],"rgthree_comparer":{"images":[{"url":"/api/view?filename=rgthree.compare._temp_jbbiq_00005_.png&type=temp&subfolder=&rand=0.6469174504797635","name":"B","selected":true}]}},"class_type":"Image Comparer (rgthree)"},"2420":{"_meta":{"title":"Preview Image"},"inputs":{"images":["2422",0]},"class_type":"PreviewImage"},"2421":{"_meta":{"title":"VAE Encode"},"inputs":{"vae":["2348",0],"pixels":["2422",0]},"class_type":"VAEEncode"},"2422":{"_meta":{"title":"Resize Image v2"},"inputs":{"image":["2211",0],"width":["2381",0],"device":"cpu","height":["2423",2],"pad_color":"255,255,255","divisible_by":16,"crop_position":"center","upscale_method":"lanczos","keep_proportion":"resize"},"class_type":"ImageResizeKJv2"},"2423":{"_meta":{"title":"Get Image Size & Count"},"inputs":{"image":["2367",0]},"class_type":"GetImageSizeAndCount"},"2430":{"_meta":{"title":"Image Stitch"},"inputs":{"image1":["2211",0],"image2":["2206",0],"direction":"right","spacing_color":"white","spacing_width":0,"match_image_size":true},"class_type":"ImageStitch"},"2446":{"_meta":{"title":"KSamplerWithNAG"},"inputs":{"cfg":1,"seed":["1059",0],"model":["2346",0],"steps":["2465",0],"denoise":1,"nag_tau":2.5,"negative":["2402",0],"positive":["2404",0],"nag_alpha":0.25,"nag_scale":3,"scheduler":"simple","latent_image":["2421",0],"nag_negative":["2361",0],"sampler_name":"euler","nag_sigma_end":0.75},"class_type":"KSamplerWithNAG"},"2449":{"_meta":{"title":"VAE Decode"},"inputs":{"vae":["2348",0],"samples":["2446",0]},"class_type":"VAEDecode"},"2450":{"_meta":{"title":"External Enum"},"inputs":{"options":"[\"Horizontal\",\"Vertical\",\"Squarish\"]","input_id":"aspect_ratio","description":"","display_name":"","default_value":"Vertical"},"class_type":"ComfyUIDeployExternalEnum"},"2451":{"_meta":{"title":"Generate Text Stream (LLMToolkit)"},"inputs":{"prompt":"Write a detailed description of a futuristic city.","context":["2204",0],"llm_model":"gpt-4o-mini","LLMToolkitTextGeneratorStream_response":"Create the character from Image 2 in a realistic style, using the muscular physique, detailed skin texture, and lifelike lighting from Image 1. Preserve the character's iconic green tunic, hat, brown boots, and leather belts with realistic fabric and leather textures. Maintain the original pose and sword-and-shield stance while converting facial features and hair to a natural human appearance, blending fantasy elements with the realism evident in Image 1."},"class_type":"LLMToolkitTextGeneratorStream"},"2453":{"_meta":{"title":"OpenAI Provider (LLMToolkit)"},"inputs":{"llm_model":["2455",0]},"class_type":"OpenAIProviderNode"},"2455":{"_meta":{"title":"External Text (ComfyUI Deploy)"},"inputs":{"input_id":"llm_model","description":"o3-mini\no4-mini\ngpt-4.1\ngpt-4.1-nano","display_name":"","default_value":"gpt-4.1-mini"},"class_type":"ComfyUIDeployExternalText"},"2465":{"_meta":{"title":"External Number Int (ComfyUI Deploy)"},"inputs":{"input_id":"steps","description":"","display_name":"","default_value":20},"class_type":"ComfyUIDeployExternalNumberInt"}}}